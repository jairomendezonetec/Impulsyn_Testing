{"version":3,"sources":["./src/app/manage-admins-page/components/item-suggestion/item-admin.component.html","./src/app/manage-admins-page/manage-admins-page.page.html","./src/app/manage-admins-page/components/item-suggestion/item-admin.component.scss","./src/app/manage-admins-page/components/item-suggestion/item-admin.component.ts","./src/app/manage-admins-page/components/item-suggestion/item-admin.module.ts","./src/app/manage-admins-page/manage-admins-page-routing.module.ts","./src/app/manage-admins-page/manage-admins-page.module.ts","./src/app/manage-admins-page/manage-admins-page.page.scss","./src/app/manage-admins-page/manage-admins-page.page.ts"],"names":[],"mappings":"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","file":"manage-admins-page-manage-admins-page-module.js","sourcesContent":["export default \"<div class=\\\"item-profile\\\">\\n  <app-image-item [imageProfile]=\\\"info.photo\\\"></app-image-item>\\n  <div class=\\\"avatar-text col-xs-7 col-md-7\\\">\\n    <span class=\\\"small-size ion-text-capitalize\\\">{{ info.complete_name }}</span>\\n    <span class=\\\"small-size\\\">{{ info.occupation }}</span>\\n    <span class=\\\"small-size\\\" *ngIf=\\\"hasLocation\\\">\\n      {{ userLocation }}\\n    </span>\\n  </div>\\n  <div class=\\\"col-xs-3 col-md-3\\\">\\n    <ion-icon *ngIf=\\\"canDelete\\\" name=\\\"trash\\\" class=\\\"icon\\\" (click)=\\\"removeAdmin()\\\"></ion-icon>\\n  </div>\\n</div>\\n\";","export default \"<app-header\\n  [title]=\\\"'organizationProfile.manageAdmin' | translate\\\"\\n  [showBackButton]=\\\"showBackButton\\\"\\n  (backButtonClick)=\\\"goBack()\\\"\\n>\\n</app-header>\\n\\n<ion-content class=\\\"item-list\\\">\\n  <div\\n    color=\\\"secondary\\\"\\n    (click)=\\\"goToInvitePage()\\\"\\n    class=\\\"flex-compatible ion-align-items-center marginBottom ion-padding-vertical w100 background-white ion-text-start\\\"\\n  >\\n    <span class=\\\"bold ion-padding-start regular-size\\\"\\n      >{{ \\\"organizationProfile.administratorsPage.invite\\\" | translate}}</span\\n    >\\n    <ion-icon name=\\\"chevron-forward-outline\\\" class=\\\"extrabig-size\\\"></ion-icon>\\n  </div>\\n\\n  <div\\n    *ngIf=\\\"pageAdministrators.length > 0\\\"\\n    color=\\\"secondary\\\"\\n    class=\\\"marginBottom flex-compatible ion-align-items-center ion-padding-vertical w100 ion-text-start\\\"\\n  >\\n    <span class=\\\"bold ion-padding-start regular-size\\\"\\n      >{{ \\\"organizationProfile.administratorsPage.title\\\" | translate}}</span\\n    >\\n  </div>\\n  <div *ngFor=\\\"let item of pageAdministrators\\\">\\n    <app-item-admin [info]=\\\"item\\\" [canDelete]=\\\"pageAdministrators.length > 1\\\" (removeAdminEv)=\\\"removeAdmin($event)\\\">\\n    </app-item-admin>\\n  </div>\\n</ion-content>\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21hbmFnZS1hZG1pbnMtcGFnZS9jb21wb25lbnRzL2l0ZW0tc3VnZ2VzdGlvbi9pdGVtLWFkbWluLmNvbXBvbmVudC5zY3NzIn0= */\";","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { UserPublicInfo } from 'src/app/networking/models/user-public-info.model';\nimport { Utils } from '../../../@global/utils';\n\n@Component({\n  selector: 'app-item-admin',\n  templateUrl: './item-admin.component.html',\n  styleUrls: ['./item-admin.component.scss'],\n})\nexport class ItemAdminComponent implements OnInit, OnChanges {\n  @Input() info: UserPublicInfo;\n  @Input() canDelete: boolean = false;\n\n  @Output() removeAdminEv = new EventEmitter<UserPublicInfo>();\n\n  public hasLocation: boolean;\n  public userLocation: string;\n\n  constructor() {}\n\n  ngOnInit() {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['info']?.currentValue) {\n      this.hasLocation = !!this.info.country;\n\n      if (this.hasLocation) {\n        this.userLocation = Utils.generateUserFriendlyLocation(\n          this.info.country,\n          this.info.region,\n          this.info.city,\n          this.info.province,\n          this.info.region_name\n        );\n      }\n    }\n  }\n\n  public removeAdmin() {\n    this.removeAdminEv.emit(this.info);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ItemAdminComponent } from './item-admin.component';\nimport { IonicModule } from '@ionic/angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ImageItemModule } from '../../../@shared/components/image-item/image-item.module';\n\n@NgModule({\n  declarations: [ItemAdminComponent],\n  imports: [IonicModule, TranslateModule.forChild(), CommonModule, ImageItemModule],\n  exports: [ItemAdminComponent],\n})\nexport class ItemAdminModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ManageAdminsPage } from './manage-admins-page.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ManageAdminsPage,\n  },\n  {\n    path: 'invite',\n    loadChildren: () => import('./invite/invite.module').then((m) => m.InvitePageModule),\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ManageAdminsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\n\nimport { ManageAdminsPageRoutingModule } from './manage-admins-page-routing.module';\n\nimport { ManageAdminsPage } from './manage-admins-page.page';\nimport { SharedModule } from '../@shared/shared.module';\nimport { ItemAdminModule } from './components/item-suggestion/item-admin.module';\n\n@NgModule({\n  imports: [SharedModule, ManageAdminsPageRoutingModule, ItemAdminModule],\n  declarations: [ManageAdminsPage],\n})\nexport class ManageAdminsPageModule {}\n","export default \".editIcon {\\n  position: absolute;\\n  right: 10px;\\n  top: 4px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWFuYWdlLWFkbWlucy1wYWdlL21hbmFnZS1hZG1pbnMtcGFnZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxRQUFBO0FBQ0YiLCJmaWxlIjoic3JjL2FwcC9tYW5hZ2UtYWRtaW5zLXBhZ2UvbWFuYWdlLWFkbWlucy1wYWdlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lZGl0SWNvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDEwcHg7XG4gIHRvcDogNHB4O1xufVxuIl19 */\";","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { BasePage } from '../base/base.page';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { Store } from '@ngxs/store';\nimport { UtilsService } from '../@core/utils.service';\nimport { Subscription } from 'rxjs';\nimport { DeletePageAdministrator, GetPageAdministrators } from '../@store/pages/pages.actions';\nimport { PagesState } from '../@store/pages/pages.state';\nimport { IUserPublicInfo } from '../@shared/interfaces/user-public-info';\nimport { AlertController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { UserState } from '../@store/user/user.state';\nimport { take } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-manage-admins-page',\n  templateUrl: './manage-admins-page.page.html',\n  styleUrls: ['./manage-admins-page.page.scss'],\n})\nexport class ManageAdminsPage extends BasePage implements OnInit, OnDestroy {\n  public profileId: string;\n  private pageAdministratorsSubscription$: Subscription;\n  public pageAdministrators: IUserPublicInfo[] = [];\n  private userId: string;\n  constructor(\n    router: Router,\n    location: Location,\n    store: Store,\n    utilsService: UtilsService,\n    private route: ActivatedRoute,\n    private alertController: AlertController,\n    private translateService: TranslateService\n  ) {\n    super(location, router, store, utilsService);\n  }\n\n  ngOnInit() {\n    this.profileId = this.route.snapshot.params['profileId'];\n    this.userId = this.store.selectSnapshot(UserState.getUserInfo)?.id;\n\n    this.store.dispatch(new GetPageAdministrators({ id: this.profileId }));\n    this.subscribeToPageAdministrators();\n  }\n\n  public goToInvitePage() {\n    this.router.navigate(['./invite'], { relativeTo: this.route });\n  }\n  public removeAdmin(event) {\n    this.showDeleteConfirm(event);\n  }\n\n  private subscribeToPageAdministrators() {\n    this.pageAdministratorsSubscription$ = this.store\n      .select(PagesState.getPageAdministrators)\n      .subscribe((data: IUserPublicInfo[]) => {\n        this.pageAdministrators = data;\n      });\n  }\n\n  private disconnectObservers(): void {\n    if (this.pageAdministratorsSubscription$) {\n      this.pageAdministratorsSubscription$.unsubscribe();\n    }\n  }\n\n  private async showDeleteConfirm(user: IUserPublicInfo) {\n    let message = '';\n    let itSelf: boolean;\n    if (user.id === this.userId) {\n      message = await this.translateService.get('organizationProfile.administratorsPage.deleteAdminOwn').toPromise();\n      itSelf = true;\n    } else {\n      message = await this.translateService.get('organizationProfile.administratorsPage.deleteAdmin').toPromise();\n      itSelf = false;\n    }\n    const alert = await this.alertController.create({\n      cssClass: 'custom-alert',\n      message,\n      buttons: [\n        {\n          text: this.translateService.instant(`buttons.cancel`),\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n            // do nothing\n          },\n        },\n        {\n          text: this.translateService.instant(`buttons.accept`),\n          handler: () => {\n            this.store\n              .dispatch(\n                new DeletePageAdministrator({\n                  organizationId: this.profileId,\n                  userId: user.id,\n                })\n              )\n              .pipe(take(1))\n              .subscribe(() => {\n                // go home\n                if (itSelf) {\n                  this.router.navigate(['/tabnav']);\n                }\n              });\n          },\n        },\n      ],\n    });\n\n    await alert.present();\n  }\n\n  ngOnDestroy() {\n    this.disconnectObservers();\n  }\n}\n"],"sourceRoot":"webpack:///"}