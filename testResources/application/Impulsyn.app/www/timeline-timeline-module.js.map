{"version":3,"sources":["./src/app/timeline/timeline.page.html","./src/app/@core/router-ext.service.ts","./src/app/timeline/timeline-routing.module.ts","./src/app/timeline/timeline.module.ts","./src/app/timeline/timeline.page.scss","./src/app/timeline/timeline.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,gkBAAigB,eAAe,s3CAAs3C,yCAAyC,ueAAue,E;;;;;;;;;;;;;;;;;;ACA13E;AACa;;IAStD,0BAAoB,MAAc;QAAlC,iBAQC;QARmB,WAAM,GAAN,MAAM,CAAQ;QAH1B,gBAAW,GAAW,SAAS,CAAC;QAChC,eAAU,GAAW,SAAS,CAAC;QAGrC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;QAClC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,UAAC,KAAK;YAC5B,IAAI,KAAK,YAAY,6DAAa,EAAE;gBAClC,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,UAAU,CAAC;gBACnC,KAAI,CAAC,UAAU,GAAG,KAAK,CAAC,GAAG,CAAC;aAC7B;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,yCAAc,GAArB;QACE,OAAO,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAEM,wCAAa,GAApB;QACE,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;;gBAzBqB,sDAAM;;IAKjB,gBAAgB;QAH5B,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;OACW,gBAAgB,CAqB5B;IAAD,uBAAC;CAAA;AArB4B;;;;;;;;;;;;;;;;;;;;ACNY;AACc;AAER;AAE/C,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,2DAAY;KACxB;CACF,CAAC;;;IAMsC,CAAC;IAA5B,yBAAyB;QAJrC,8DAAQ,CAAC;YACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;SACxB,CAAC;OACW,yBAAyB,CAAG;IAAD,gCAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;AChBG;AAE6B;AACvB;AACS;AACwB;;;IAM/C,CAAC;IAArB,kBAAkB;QAJ9B,8DAAQ,CAAC;YACR,OAAO,EAAE,CAAC,kEAAY,EAAE,kFAAyB,EAAE,4FAAiB,CAAC;YACrE,YAAY,EAAE,CAAC,2DAAY,CAAC;SAC7B,CAAC;OACW,kBAAkB,CAAG;IAAD,yBAAC;CAAA;AAAH;;;;;;;;;;;;;ACX/B;AAAe,+EAAgB,uBAAuB,GAAG,6CAA6C,+SAA+S,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAjU;AASvC;AACqB;AACtB;AAEH;AACa;AACC;AAGD;AAEL;AAGsB;AACR;AAGoC;AAClC;AACkB;AAE1B;AAC4C;AAC/C;AAChB;AACH;AAC4B;AACN;AACa;AAC4B;AACxD;AAE1C,IAAM,QAAQ,GAAG,UAAU,CAAC;AAE5B,IAAM,gBAAgB,GAAG,CAAC,CAAC;AAC3B,IAAM,8BAA8B,GAAG,EAAE,CAAC;AAC1C,IAAM,qBAAqB,GAAG,EAAE,CAAC;AACjC,IAAM,qBAAqB,GAAG,EAAE,CAAC;;IAoE/B,sBACU,KAAY,EACZ,MAAc,EACd,UAAsB,EACtB,YAA0B,EAC1B,WAAiC,EACjC,iBAA+C,EAC/C,gBAAkC,EAClC,QAAkB;QAPlB,UAAK,GAAL,KAAK,CAAO;QACZ,WAAM,GAAN,MAAM,CAAQ;QACd,eAAU,GAAV,UAAU,CAAY;QACtB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,gBAAW,GAAX,WAAW,CAAsB;QACjC,sBAAiB,GAAjB,iBAAiB,CAA8B;QAC/C,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,aAAQ,GAAR,QAAQ,CAAU;QA/DpB,uBAAkB,GAAG,KAAK,CAAC;QAC3B,mBAAc,GAAG,8BAA8B,CAAC;QAShD,qBAAgB,GAAG,GAAG,CAAC;QACvB,sBAAiB,GAAG,GAAG,CAAC;QAEzB,mBAAc,GAAG,qBAAqB,CAAC;QAStC,0BAAqB,GAAG,KAAK,CAAC;QAE/B,eAAU,GAAwB,2DAAS,CAAC,mBAAmB,CAAC;QAS/D,cAAS,GAAG,EAAE,CAAC;QAEhB,iBAAY,GAAe,EAAE,CAAC;QAC9B,cAAS,GAAsB,EAAE,CAAC;QAMlC,uBAAkB,GAAG,KAAK,CAAC;QAE1B,cAAS,GAAG,KAAK,CAAC;QAqBxB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,GAAG,qBAAqB,CAAC,CAAC;IACnF,CAAC;IApBD,sBAA6C,iCAAO;aAApD,UAAqD,OAAmB;YACtE,IAAI,OAAO,EAAE;gBACX,8CAA8C;gBAC9C,IAAI,CAAC,wBAAwB,GAAG,OAAO,CAAC;gBACxC,IAAI,CAAC,sBAAsB,EAAE,CAAC;gBAC9B,IAAI,CAAC,oCAAoC,EAAE,CAAC;aAC7C;QACH,CAAC;;;OAAA;IAeD,+BAAQ,GAAR;QACE,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,6BAA6B,EAAE,CAAC;IACvC,CAAC;IAEO,oDAA6B,GAArC;QAAA,iBAIC;QAHC,IAAI,CAAC,8BAA8B,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,oEAAU,CAAC,oBAAoB,CAAC,CAAC,SAAS,CAAC,UAAC,MAAM;YACxG,KAAI,CAAC,kBAAkB,GAAG,MAAM,CAAC;QACnC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,6CAAsB,GAA9B;QAAA,iBAIC;QAHC,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,UAAC,IAAI;YACtE,KAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC/B,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,uCAAgB,GAAxB;QAAA,iBAIC;QAHC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAC,IAAI;YAC1D,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,2CAAoB,GAA5B;QAAA,iBAIC;QAHC,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,UAAC,IAAI;YAC7D,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC;IAEa,wCAAiB,GAA/B;;;;;gBACE,IAAI;oBACF,IAAI,CAAC,yBAAyB,EAAE,CAAC;oBAEjC,IAAI,IAAI,CAAC,4BAA4B,EAAE,IAAI,IAAI,CAAC,SAAS,EAAE;wBACzD,sBAAO;qBACR;oBACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,4EAAc,EAAE,CAAC,CAAC;oBAC1C,IAAI,CAAC,YAAY,SAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,gEAAS,CAAC,WAAW,CAAC,0CAAE,KAAK,CAAC;oBAC5E,IAAI,CAAC,SAAS,SAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,gEAAS,CAAC,WAAW,CAAC,0CAAE,EAAE,CAAC;oBACtE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,qGAAoC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACpE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,KAAK;yBACP,QAAQ,CAAC,IAAI,4EAAW,CAAC,EAAE,KAAK,EAAE,2DAAS,CAAC,+BAA+B,EAAE,CAAC,CAAC;yBAC/E,IAAI,CAAC,4DAAI,CAAC,CAAC,CAAC,CAAC;yBACb,SAAS,CAAC;wBACT,IAAI,CAAC,KAAI,CAAC,oBAAoB,EAAE;4BAC9B,KAAI,CAAC,0BAA0B,EAAE,CAAC;yBACnC;wBACD,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,8EAAgB,EAAE,CAAC,CAAC;wBAC5C,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBACzB,CAAC,CAAC,CAAC;iBACN;gBAAC,OAAO,KAAK,EAAE;oBACd,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACrB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,2EAAa,EAAE,CAAC,CAAC;oBACzC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;iBACxB;;;;KACF;IAEM,mCAAY,GAAnB;QACE,iEAAiE;QACjE,IAAM,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC;QACpF,YAAY,CAAC,KAAK,EAAE,CAAC;IACvB,CAAC;IAEO,0CAAmB,GAA3B;QAAA,iBAWC;QAVC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,EAAE,CAAC,SAAS,CAAC,UAAC,GAAG;YAClF,IAAI,GAAG,KAAK,QAAQ,EAAE;gBACpB,KAAI,CAAC,iBAAiB,EAAE,CAAC;aAC1B;YACD,2EAA2E;YAC3E,IAAM,QAAQ,GAAG,KAAI,CAAC,gBAAgB,CAAC,cAAc,EAAE,CAAC;YACxD,IAAI,QAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE;gBACpC,KAAI,CAAC,uBAAuB,EAAE,CAAC;aAChC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,iDAA0B,GAAlC;QAAA,iBAeC;QAdC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,4EAAa,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,UAAO,IAAI;;gBAC5F,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;gBAE5B,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,4BAA4B,EAAE,EAAE;oBACpE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,qGAAoC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpF,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;iBAChD;gBAED,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,iEAAS,CAAC,SAAS,CAAC,EAAE;oBACpF,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,oFAAoB,EAAE,CAAC,CAAC;oBAChD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,4EAAgB,EAAE,CAAC,CAAC;oBAC5C,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,wFAAwB,EAAE,CAAC,CAAC;iBACrD;;;aACF,CAAC,CAAC;IACL,CAAC;IAEO,6CAAsB,GAA9B;QAAA,iBA8BC;QA7BC,8BAA8B;QAC9B,IAAI,CAAC,oBAAoB,GAAG,IAAI,oBAAoB,CAClD,UAAO,EAAO;gBAAP,gEAAO,EAAN,KAAK;;;oBACX,IAAI,CAAC,IAAI,CAAC,qBAAqB,IAAI,KAAK,IAAI,KAAK,CAAC,cAAc,EAAE;wBAChE,IAAI,CAAC,oBAAoB,EAAE,CAAC;qBAC7B;;;;SACF,EACD;YACE,IAAI,EAAE,IAAI,CAAC,wBAAwB,CAAC,aAAa;YACjD,UAAU,EAAE,OAAO;SACpB,CACF,CAAC;QAEF,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;QAE3E,kCAAkC;QAClC,IAAI,CAAC,iBAAiB,GAAG,IAAI,oBAAoB,CAC/C,UAAO,EAAO;gBAAP,gEAAO,EAAN,KAAK;;;oBACX,IAAI,CAAC,IAAI,CAAC,qBAAqB,IAAI,KAAK,IAAI,KAAK,CAAC,cAAc,EAAE;wBAChE,IAAI,CAAC,wBAAwB,EAAE,CAAC;qBACjC;;;;SACF,EACD;YACE,IAAI,EAAE,IAAI,CAAC,wBAAwB,CAAC,aAAa;YACjD,UAAU,EAAE,OAAO;SACpB,CACF,CAAC;QAEF,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC;IACvE,CAAC;IAEO,2CAAoB,GAA5B;QACE,IAAM,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAExG,IAAI,CAAC,eAAe,EAAE;YACpB,OAAO;SACR;QAED,IAAM,aAAa,GAAG,eAAe,CAAC,IAAI,GAAG,CAAC,CAAC;QAE/C,IAAI,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE;YACpD,OAAO;SACR;QAED,IAAI,CAAC,KAAK,CAAC,QAAQ,CACjB,IAAI,8FAA6B,CAC/B;YACE,QAAQ,EAAE,IAAI,CAAC,4BAA4B,EAAE,CAAC,aAAa;YAC3D,KAAK,EAAE,2DAAS,CAAC,+BAA+B;YAChD,KAAK,EAAE,MAAM;YACb,IAAI,EAAE,aAAa;SACpB,EACD,gBAAgB,CACjB,CACF,CAAC;IACJ,CAAC;IAEO,+CAAwB,GAAhC;QACE,IAAM,gBAAgB,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QAE9D,IAAI,CAAC,gBAAgB,EAAE;YACrB,OAAO;SACR;QAED,IAAM,aAAa,GAAG,gBAAgB,CAAC,IAAI,GAAG,CAAC,CAAC;QAEhD,IAAI,aAAa,IAAI,CAAC,EAAE;YACtB,OAAO;SACR;QAED,IAAI,CAAC,KAAK,CAAC,QAAQ,CACjB,IAAI,kGAAiC,CACnC;YACE,QAAQ,EAAE,IAAI,CAAC,4BAA4B,EAAE,CAAC,aAAa;YAC3D,KAAK,EAAE,2DAAS,CAAC,+BAA+B;YAChD,KAAK,EAAE,MAAM;YACb,IAAI,EAAE,aAAa;SACpB,EACD,gBAAgB,CACjB,CACF,CAAC;IACJ,CAAC;IAEM,oCAAa,GAApB,UAAqB,aAAa;QAChC,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,mEAAc,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IAC3E,CAAC;IAEM,uCAAgB,GAAvB,UAAwB,aAAa;QACnC,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,mEAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IAC9E,CAAC;IAEM,+CAAwB,GAA/B,UAAgC,MAAM;QACpC,IAAM,cAAc,GAAW,MAAM,CAAC,cAAc,CAAC;QACrD,IAAM,aAAa,GAAW,MAAM,CAAC,aAAa,CAAC;QAEnD,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,aAAa,CAAC,CAAC;QAC3C,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QAEnC,QAAQ,cAAc,EAAE;YACtB,KAAK,CAAC,EAAE,QAAQ;gBACd,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;gBACrC,MAAM;YACR,KAAK,CAAC,EAAE,WAAW;gBACjB,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;gBACrC,MAAM;YACR,KAAK,CAAC,EAAE,oBAAoB;gBAC1B,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;gBACjD,MAAM;YACR,KAAK,CAAC,EAAE,gBAAgB;gBACtB,MAAM;SACT;IACH,CAAC;IAEO,2DAAoC,GAA5C;QAAA,iBASC;QARC,IAAI,CAAC,uBAAuB,GAAG,IAAI,gBAAgB,CAAC;YAClD,IAAI,KAAI,CAAC,sBAAsB,EAAE;gBAC/B,KAAI,CAAC,wBAAwB,CAAC,aAAa,CAAC,SAAS,GAAG,KAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC;gBAC9F,KAAI,CAAC,eAAe,EAAE,CAAC;aACxB;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,IAAI,CAAC,wBAAwB,CAAC,aAAa,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;IACzG,CAAC;IAEO,mCAAY,GAApB;QACE,IAAM,MAAM,GAAG,QAAQ,CAAC,sBAAsB,CAAC,QAAQ,CAAC,CAAC;QACzD,OAAO,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;IAC3B,CAAC;IAEM,mCAAY,GAAnB,UAAoB,KAAU;QAC5B,IAAI,IAAI,CAAC,YAAY,EAAE,IAAI,IAAI,CAAC,kBAAkB,EAAE;YAClD,OAAO;SACR;QACD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACjC,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;QAC3D,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,mBAAmB,CAAC;IACrD,CAAC;IAEM,kCAAW,GAAlB,UAAmB,KAAU;QAC3B,IAAI,IAAI,CAAC,YAAY,EAAE,IAAI,IAAI,CAAC,kBAAkB,EAAE;YAClD,OAAO;SACR;QACD,IAAM,mBAAmB,GAAW,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;QACpE,IAAI,CAAC,wBAAwB,CAAC,aAAa,CAAC,SAAS,IAAI,mBAAmB,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACvG,IAAI,CAAC,kBAAkB,IAAI,mBAAmB,GAAG,IAAI,CAAC,kBAAkB,CAAC;IAC3E,CAAC;IAEM,iCAAU,GAAjB,UAAkB,KAAU,EAAE,KAAa;QACzC,IAAI,IAAI,CAAC,YAAY,EAAE,IAAI,IAAI,CAAC,kBAAkB,EAAE;YAClD,OAAO;SACR;QACD,IAAM,SAAS,GAAG,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,mBAAmB,CAAC;QAC7E,IAAM,WAAW,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC;QAErD,IAAI,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,gBAAgB,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC,iBAAiB,EAAE;YAC3F,cAAc;YACd,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC,CAAC;YACvC,OAAO;SACR;QAED,IAAI,SAAS,GAAG,CAAC,EAAE;YACjB,aAAa;YACb,IAAI,CAAC,yBAAyB,CAAC,KAAK,CAAC,CAAC;SACvC;aAAM;YACL,WAAW;YACX,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;SACnC;IACH,CAAC;IAEO,4CAAqB,GAA7B,UAA8B,KAAa;QACzC,IAAM,uBAAuB,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAE/D,IAAI,KAAK,KAAK,uBAAuB,CAAC,MAAM,GAAG,CAAC,EAAE;YAChD,OAAO;SACR;QAED,IAAI,CAAC,yBAAyB,EAAE,CAAC;QAEjC,IAAI,CAAC,kBAAkB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAEO,gDAAyB,GAAjC,UAAkC,KAAa;QAC7C,IAAI,KAAK,KAAK,CAAC,EAAE;YACf,OAAO;SACR;QAED,IAAI,CAAC,yBAAyB,EAAE,CAAC;QAEjC,IAAI,CAAC,kBAAkB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAEO,iDAA0B,GAAlC,UAAmC,KAAa;QAC9C,IAAI;YACF,IAAM,qBAAqB,GAAG,IAAI,CAAC,wBAAwB,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC;YAClG,IAAM,6BAA6B,GAAG,qBAAqB,CAAC,MAAM,GAAG,CAAC,GAAG,qBAAqB,CAAC,GAAG,CAAC;YAEnG,IAAM,uBAAuB,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAC/D,IAAM,MAAM,GAAG,uBAAuB,CAAC,KAAK,CAAC,CAAC,qBAAqB,EAAE,CAAC;YAEtE,IAAI,MAAM,CAAC,GAAG,GAAG,6BAA6B,EAAE;gBAC9C,IAAI,CAAC,kBAAkB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;gBACnC,IAAI,CAAC,yBAAyB,EAAE,CAAC;aAClC;iBAAM,IAAI,MAAM,CAAC,MAAM,GAAG,6BAA6B,EAAE;gBACxD,IAAI,CAAC,kBAAkB,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;gBACnC,IAAI,CAAC,yBAAyB,EAAE,CAAC;aAClC;iBAAM;gBACL,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;aAChC;YAED,IAAI,CAAC,eAAe,EAAE,CAAC;SACxB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACtB;IACH,CAAC;IAEO,sCAAe,GAAvB;QACE,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAC/B,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;IACpD,CAAC;IAEO,mCAAY,GAApB;QAAA,iBAyBC;QAxBC,IAAM,UAAU,GAAG,IAAI,CAAC,sBAAsB,CAAC,qBAAqB,EAAE,CAAC,GAAG,CAAC;QAC3E,IAAM,gBAAgB,GAAG,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC;QAC/D,OAAO;YACL,IAAM,cAAc,GAAG,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,cAAc,CAAC;YAEnF,IAAM,wBAAwB,GAAG,KAAI,CAAC,wBAAwB,CAAC,aAAa,CAAC;YAC7E,IAAM,WAAW,GAAG,wBAAwB,CAAC,SAAS,GAAG,cAAc,CAAC;YAExE,IAAI,cAAc,GAAG,CAAC,EAAE;gBACtB,wBAAwB,CAAC,SAAS,GAAG,WAAW,GAAG,gBAAgB,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,WAAW,CAAC;aACtG;iBAAM;gBACL,wBAAwB,CAAC,SAAS,GAAG,WAAW,GAAG,gBAAgB,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,WAAW,CAAC;aACtG;YAED,wEAAwE;YACxE,IACE,CAAC,WAAW,GAAG,gBAAgB,IAAI,cAAc,GAAG,CAAC,CAAC;gBACtD,CAAC,WAAW,GAAG,gBAAgB,IAAI,cAAc,GAAG,CAAC,CAAC,EACtD;gBACA,MAAM,CAAC,qBAAqB,CAAC,KAAI,CAAC,YAAY,EAAE,CAAC,CAAC;aACnD;iBAAM;gBACL,KAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;aACjC;QACH,CAAC,CAAC;IACJ,CAAC;IAEO,8CAAuB,GAA/B;QACE,OAAO,QAAQ;aACZ,cAAc,CAAC,0BAA0B,CAAC;aAC1C,sBAAsB,CAAC,uBAAuB,CAAkC,CAAC;IACtF,CAAC;IAEM,qCAAc,GAArB,UAAsB,MAAM;QAC1B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;IACzD,CAAC;IAEM,oCAAa,GAApB,UAAqB,WAAyB;QAC5C,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE,EAAE,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IACpF,CAAC;IAEM,gCAAS,GAAhB,UAAiB,KAAK;QACpB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,qGAAoC,CAAC,IAAI,CAAC,CAAC,CAAC;QACpE,IAAM,YAAY,GAAG,IAAI,CAAC,KAAK;aAC5B,QAAQ,CAAC,IAAI,4EAAW,CAAC,EAAE,KAAK,EAAE,2DAAS,CAAC,+BAA+B,EAAE,CAAC,CAAC;aAC/E,SAAS,CACR;YACE,YAAY,CAAC,WAAW,EAAE,CAAC;YAC3B,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QAC1B,CAAC,EACD,UAAC,KAAK;YACJ,YAAY,CAAC,WAAW,EAAE,CAAC;YAC3B,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QAC1B,CAAC,CACF,CAAC;IACN,CAAC;IAEO,yCAAkB,GAA1B,UAA2B,KAAa;QACtC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC,KAAK,CAAC,CAAC;QACpE,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IACrE,CAAC;IAEM,mDAA4B,GAAnC;QACE,OAAO,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,4EAAa,CAAC,4BAA4B,CAAC,CAAC;IAC/E,CAAC;IAEM,iCAAU,GAAjB,UAAkB,OAAO;QACvB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,2EAAU,CAAC,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;IACnE,CAAC;IAEM,kCAAW,GAAlB,UAAmB,SAAiB;QAClC,IAAM,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAC,IAAc,IAAK,WAAI,CAAC,EAAE,KAAK,SAAS,EAArB,CAAqB,CAAC,CAAC;QAClF,IAAI,OAAO,EAAE;YACX,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,wFAAuB,CAAC,2DAAK,OAAO,EAAG,CAAC,CAAC;SAClE;IACH,CAAC;IAEM,8CAAuB,GAA9B;QACE,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;YAC5B,OAAO;SACR;QAED,IAAM,uBAAuB,GAAG,yDAAS,CAAC,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC,CAAC;QACjH,IAAI,CAAC,0BAA0B,CAAC,uBAAuB,CAAC,CAAC;IAC3D,CAAC;IAEO,uCAAgB,GAAxB,UAAyB,aAAqB;QAC5C,IAAM,GAAG,GAAiB,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,CAC9D,UAAC,WAAyB,IAAK,kBAAW,CAAC,EAAE,KAAK,aAAa,EAAhC,CAAgC,CAChE,CAAC;QACF,IAAI,GAAG,EAAE;YACP,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,yFAAwB,CAAC,GAAG,CAAC,CAAC,CAAC;SACxD;IACH,CAAC;IAEM,0CAAmB,GAA1B,UAA2B,KAAa,EAAE,IAAkB;QAC1D,OAAO,IAAI,CAAC,EAAE,CAAC;IACjB,CAAC;IAEM,kCAAW,GAAlB,UAAmB,MAAM;QACvB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,4EAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACjG,CAAC;IAEM,mCAAY,GAAnB,UAAoB,MAAM;QACxB,IAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,UAAC,IAAI,IAAK,WAAI,CAAC,EAAE,KAAK,MAAM,CAAC,EAAE,EAArB,CAAqB,CAAC,CAAC;QAC/E,IAAM,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAsB,CAAC;QACvE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,4EAAgB,CAAC,EAAE,YAAY,gBAAE,CAAC,CAAC,CAAC;IAC9D,CAAC;IAEM,0CAAmB,GAA1B,UAA2B,MAAM;QAC/B,IAAI,CAAC,iBAAiB,CAAC,2BAA2B,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;IAChE,CAAC;IAEO,gDAAyB,GAAjC;QACE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,iFAAqB,CAAC,KAAK,CAAC,CAAC,CAAC;IACxD,CAAC;IAEO,0CAAmB,GAA3B;QACE,IAAI,IAAI,CAAC,oBAAoB,EAAE;YAC7B,IAAI,CAAC,oBAAoB,CAAC,UAAU,EAAE,CAAC;SACxC;QACD,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,IAAI,CAAC,iBAAiB,CAAC,UAAU,EAAE,CAAC;SACrC;QACD,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAChC,IAAI,CAAC,uBAAuB,CAAC,UAAU,EAAE,CAAC;SAC3C;QACD,IAAI,IAAI,CAAC,oBAAoB,EAAE;YAC7B,IAAI,CAAC,oBAAoB,CAAC,WAAW,EAAE,CAAC;SACzC;QACD,IAAI,IAAI,CAAC,oBAAoB,EAAE;YAC7B,IAAI,CAAC,oBAAoB,CAAC,WAAW,EAAE,CAAC;SACzC;QACD,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAChC,IAAI,CAAC,uBAAuB,CAAC,WAAW,EAAE,CAAC;SAC5C;QACD,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,IAAI,CAAC,iBAAiB,CAAC,WAAW,EAAE,CAAC;SACtC;QACD,IAAI,IAAI,CAAC,qBAAqB,EAAE;YAC9B,IAAI,CAAC,qBAAqB,CAAC,WAAW,EAAE,CAAC;SAC1C;QAED,IAAI,IAAI,CAAC,8BAA8B,EAAE;YACvC,IAAI,CAAC,8BAA8B,CAAC,WAAW,EAAE,CAAC;SACnD;IACH,CAAC;IAED,kCAAW,GAAX;QACE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,qGAAoC,CAAC,IAAI,CAAC,CAAC,CAAC;QACpE,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC7B,CAAC;;gBA9kBc,iDAAK;gBAEb,sDAAM;gBAbK,wDAAU;gBAkBrB,gEAAY;gBAKZ,kFAAoB;gBASpB,iHAA4B;gBAI5B,0EAAgB;gBAIhB,wDAAQ;;;yBAkBd,uDAAS,SAAC,QAAQ;0BAgDlB,uDAAS,SAAC,SAAS,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE;;IAnDF;QAApC,0DAAM,CAAC,0EAAY,CAAC,cAAc,CAAC;8DAA0E;IAC3E;QAAlC,0DAAM,CAAC,0EAAY,CAAC,YAAY,CAAC;uDAAqD;IAC/C;QAAvC,0DAAM,CAAC,oEAAU,CAAC,mBAAmB,CAAC;wDAAiD;IAH7E,YAAY;QALxB,+DAAS,CAAC;YACT,QAAQ,EAAE,cAAc;YACxB,0NAAmC;;SAEpC,CAAC;OACW,YAAY,CAoiBxB;IAAD,mBAAC;CAAA;AApiBwB","file":"timeline-timeline-module.js","sourcesContent":["export default \"<ion-content>\\n  <ion-refresher\\n    *ngIf=\\\"currentPublication?.id === this.getFirstPublicationReference()?.id || publicationList?.publications?.length === 0\\\"\\n    slot=\\\"fixed\\\"\\n    (ionRefresh)=\\\"doRefresh($event)\\\"\\n  >\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n\\n  <div id=\\\"publicationListContainer\\\" #content *ngIf=\\\"publicationList?.publications?.length > 0\\\">\\n    <div id=\\\"loaderTop\\\"></div>\\n    <div\\n      *ngFor=\\\"let publication of publicationList?.publications; let i = index; trackBy: trackByPublications\\\"\\n      class=\\\"size-100\\\"\\n    >\\n      <div\\n        class=\\\"publication-container\\\"\\n        (touchstart)=\\\"onTouchStart($event)\\\"\\n        (touchmove)=\\\"onTouchMove($event)\\\"\\n        (touchend)=\\\"onTouchEnd($event, i)\\\"\\n      >\\n        <app-publication\\n          [i]=\\\"i\\\"\\n          [buttonList]=\\\"buttonList\\\"\\n          [publication]=\\\"publication\\\"\\n          (buttonClick)=\\\"onPublicationButtonClick($event)\\\"\\n          (clickUserProfile)=\\\"goUserProfile($event)\\\"\\n          (showCommentsList)=\\\"showCommentsList(publication.id)\\\"\\n          (showLikesList)=\\\"showLikesList(publication.id)\\\"\\n          [userPhoto]=\\\"publication.publisher.photo\\\"\\n        ></app-publication>\\n      </div>\\n    </div>\\n    <app-new-post-button\\n      [fadeIn]=\\\"!focusOnPublication\\\"\\n      (actionButtonClick)=\\\"onNewPostClick($event)\\\"\\n    ></app-new-post-button>\\n    <div id=\\\"loaderBottom\\\"></div>\\n  </div>\\n  <!--  No publications. Show suggestions -->\\n  <div *ngIf=\\\"publicationList?.publications?.length === 0\\\">\\n    <!--  start suggestions list-->\\n    <div\\n      *ngIf=\\\"(userSuggestionsList$ | async)?.length > 0\\\"\\n      color=\\\"secondary\\\"\\n      class=\\\"marginBottom ion-margin-top flex-compatible ion-align-items-center ion-padding-vertical w100 background-white ion-text-start\\\"\\n    >\\n      <span class=\\\"bold ion-padding-start regular-size\\\">{{ \\\"networking.connections\\\" | translate}}</span>\\n    </div>\\n    <app-suggestions-list\\n      *ngIf=\\\"itemsSuggestions\\\"\\n      (itemClick)=\\\"onItemClick($event)\\\"\\n      (followPageClick)=\\\"onFollowPage($event)\\\"\\n      [itemsRequests]=\\\"itemsRequests\\\"\\n      [maxSuggestions]=\\\"maxSuggestions\\\"\\n      [itemsSuggestions]=\\\"itemsSuggestions\\\"\\n      (requestConnectionClick)=\\\"onRequestConnection($event)\\\"\\n      [pages]=\\\"pages\\\"\\n    ></app-suggestions-list>\\n    <!--  end suggestions list-->\\n  </div>\\n</ion-content>\\n\";","import { Injectable } from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class RouterExtService {\n  private previousUrl: string = undefined;\n  private currentUrl: string = undefined;\n\n  constructor(private router: Router) {\n    this.currentUrl = this.router.url;\n    router.events.subscribe((event) => {\n      if (event instanceof NavigationEnd) {\n        this.previousUrl = this.currentUrl;\n        this.currentUrl = event.url;\n      }\n    });\n  }\n\n  public getPreviousUrl() {\n    return this.previousUrl;\n  }\n\n  public getCurrentUrl() {\n    return this.currentUrl;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TimelinePage } from './timeline.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TimelinePage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TimelinePageRoutingModule {}\n","import { NgModule } from '@angular/core';\n\nimport { TimelinePageRoutingModule } from './timeline-routing.module';\nimport { TimelinePage } from './timeline.page';\nimport { SharedModule } from '../@shared/shared.module';\nimport { PublicationModule } from './components/publication/publication.module';\n\n@NgModule({\n  imports: [SharedModule, TimelinePageRoutingModule, PublicationModule],\n  declarations: [TimelinePage],\n})\nexport class TimelinePageModule {}\n","export default \".marginBottom {\\n  margin-bottom: 2px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGltZWxpbmUvdGltZWxpbmUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7QUFDRiIsImZpbGUiOiJzcmMvYXBwL3RpbWVsaW5lL3RpbWVsaW5lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXJnaW5Cb3R0b20ge1xuICBtYXJnaW4tYm90dG9tOiAycHg7XG59XG4iXX0= */\";","import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport {\n  AddComment,\n  AddNextPublicationsToTimeline,\n  AddPreviousPublicationsToTimeline,\n  ChangeCommentLikeStatus,\n  ChangeLikeStatusTimeline,\n  GetTimeline,\n  SetTimelineFirstPublicationReference,\n} from '../@store/timeline/timeline.actions';\nimport { TimelineState } from '../@store/timeline/timeline.state';\nimport { Select, Store } from '@ngxs/store';\nimport { Observable, Subscription } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { UserState } from '../@store/user/user.state';\nimport { ION_SHEET_TYPE } from './enum/ion-sheet-type';\nimport { IPublicationList } from '../@shared/interfaces/publication-list';\nimport { IPublication } from '../@shared/interfaces/publication';\nimport { UtilsService } from '../@core/utils.service';\nimport { PublicationButton } from './components/publication/publication.component';\nimport { Constants } from '../@global/constants';\nimport { IComment } from '../@shared/interfaces/comment';\nimport { IUserPublicInfo } from '../@shared/interfaces/user-public-info';\nimport { SocialSharingService } from '../@core/social-sharing.service';\nimport { NetworkState } from '../@store/network/network.state';\nimport { UserPublicInfo } from '../networking/models/user-public-info.model';\nimport { IOrganizationInfo } from '../@shared/interfaces/organization-info';\nimport { GetPendingRequestsAction, GetSuggestionsAction } from '../@store/network/network.actions';\nimport { PUBLISHER_TYPE } from '../@shared/enums/publisher-type';\nimport { FollowPageAction, GetFollowedPages } from '../@store/pages/pages.actions';\nimport { ConnectionRequestModel } from '../networking/models/connection-request.model';\nimport { PagesState } from '../@store/pages/pages.state';\nimport { NetworkingControllersService } from '../networking/services/networking-controllers.service';\nimport { AuthState } from '../@store/auth/auth.state';\nimport { take } from 'rxjs/operators';\nimport { findIndex } from 'lodash';\nimport { RouterExtService } from '../@core/router-ext.service';\nimport { PostsState } from '../@store/posts/posts.state';\nimport { SetFocusOnPublication } from '../@store/posts/posts.actions';\nimport { AsyncCallFail, AsyncCallStart, AsyncCallSuccess } from '../@store/common/common.actions';\nimport { Platform } from '@ionic/angular';\n\nconst TAB_NAME = 'timeline';\n\nconst MAX_LOADED_PAGES = 3;\nconst DEFAULT_SCROLL_EFFECT_VELOCITY = 20;\nconst SCROLL_VELOCITY_RATIO = 32;\nconst MAX_SUGGESTIONS_ITEMS = 10;\n\n@Component({\n  selector: 'app-timeline',\n  templateUrl: './timeline.page.html',\n  styleUrls: ['./timeline.page.scss'],\n})\nexport class TimelinePage implements OnInit, OnDestroy {\n  @Select(NetworkState.getSuggestions) userSuggestionsList$: Observable<(UserPublicInfo | IOrganizationInfo)[]>;\n  @Select(NetworkState.getRequested) userSentList$: Observable<ConnectionRequestModel[]>;\n  @Select(PagesState.getFollowedPageList) userPagesList$: Observable<IOrganizationInfo[]>;\n  @ViewChild('slider') slider: any;\n\n  private isScrollInProgress = false;\n  private scrollVelocity = DEFAULT_SCROLL_EFFECT_VELOCITY;\n\n  private subscriptionSuggestions: Subscription;\n  private subscriptionRequested: Subscription;\n  private subscriptionPages: Subscription;\n  // swipe variables\n  private touchStartPositionY: number;\n  private lastTouchPositionY: number;\n  private swipeStartTime: number;\n  private swipeAllowedTime = 300;\n  private distanceThreshold = 150;\n  public itemsSuggestions: (UserPublicInfo | IOrganizationInfo)[];\n  public maxSuggestions = MAX_SUGGESTIONS_ITEMS;\n  public itemsRequests: ConnectionRequestModel[];\n  public pages: IOrganizationInfo[];\n\n  // Intersectors and mutation observers\n  private loaderTopObserver: IntersectionObserver;\n  private loaderBottomObserver: IntersectionObserver;\n  private publicationListObserver: MutationObserver;\n\n  private isLoadingPublications = false;\n  public publicationList: IPublicationList;\n  public buttonList: PublicationButton[] = Constants.PUBLICATION_BUTTONS;\n  public currentElementToScroll: HTMLElement;\n  public currentPublication: IPublication;\n  public firstPublicationReference: IPublication;\n\n  // Subscriptions\n  private timelineSubscription: Subscription;\n  private tabEnterSubscription: Subscription;\n\n  private profileId = '';\n\n  public commentItems: IComment[] = [];\n  public likeItems: IUserPublicInfo[] = [];\n  public profileImage: string;\n\n  private publicationId: string;\n  private publicationListContainer: ElementRef;\n\n  public focusOnPublication = false;\n  private focusOnPublicationSubscription: Subscription;\n  private inProcess = false;\n\n  @ViewChild('content', { static: false }) set content(content: ElementRef) {\n    if (content) {\n      // initially setter gets called with undefined\n      this.publicationListContainer = content;\n      this.initLoaderIntersectors();\n      this.subscribeToDOMPublicationListChanges();\n    }\n  }\n\n  constructor(\n    private store: Store,\n    private router: Router,\n    private elementRef: ElementRef,\n    private utilsService: UtilsService,\n    private socialShare: SocialSharingService,\n    private networkingService: NetworkingControllersService,\n    private routerExtService: RouterExtService,\n    private platform: Platform\n  ) {\n    this.scrollVelocity = Math.floor(this.platform.height() / SCROLL_VELOCITY_RATIO);\n  }\n\n  ngOnInit() {\n    this.subscribeToTabEnter();\n    this.subscribeToSuggestions();\n    this.subscribeToPages();\n    this.subscribeToRequested();\n    this.subscribeToFocusOnPublication();\n  }\n\n  private subscribeToFocusOnPublication(): void {\n    this.focusOnPublicationSubscription = this.store.select(PostsState.isFocusOnPublication).subscribe((result) => {\n      this.focusOnPublication = result;\n    });\n  }\n\n  private subscribeToSuggestions(): void {\n    this.subscriptionSuggestions = this.userSuggestionsList$.subscribe((data) => {\n      this.itemsSuggestions = data;\n    });\n  }\n\n  private subscribeToPages(): void {\n    this.subscriptionPages = this.userPagesList$.subscribe((data) => {\n      this.pages = data;\n    });\n  }\n\n  private subscribeToRequested(): void {\n    this.subscriptionRequested = this.userSentList$.subscribe((data) => {\n      this.itemsRequests = data;\n    });\n  }\n\n  private async initTimelineLogic(): Promise<void> {\n    try {\n      this.disableFocusOnPublication();\n\n      if (this.getFirstPublicationReference() || this.inProcess) {\n        return;\n      }\n      this.store.dispatch(new AsyncCallStart());\n      this.profileImage = this.store.selectSnapshot(UserState.getUserInfo)?.photo;\n      this.profileId = this.store.selectSnapshot(UserState.getUserInfo)?.id;\n      this.store.dispatch(new SetTimelineFirstPublicationReference(null));\n      this.inProcess = true;\n      this.store\n        .dispatch(new GetTimeline({ limit: Constants.PUBLICATION_LOAD_LIMIT_TIMELINE }))\n        .pipe(take(1))\n        .subscribe(() => {\n          if (!this.timelineSubscription) {\n            this.subscribeToTimelineChanges();\n          }\n          this.store.dispatch(new AsyncCallSuccess());\n          this.inProcess = false;\n        });\n    } catch (error) {\n      console.error(error);\n      this.store.dispatch(new AsyncCallFail());\n      this.inProcess = false;\n    }\n  }\n\n  public removeShadow(): void {\n    // get showLessLink to force click and remove shadow in directive\n    const showLessLink = this.elementRef.nativeElement.querySelector('.show-less-link');\n    showLessLink.click();\n  }\n\n  private subscribeToTabEnter(): void {\n    this.tabEnterSubscription = this.utilsService.getTabNavEnterSubject().subscribe((tab) => {\n      if (tab === TAB_NAME) {\n        this.initTimelineLogic();\n      }\n      // check if come from create post and relocate scroll (bug on some devices)\n      const previous = this.routerExtService.getPreviousUrl();\n      if (previous.includes('create-post')) {\n        this.centerPublicationScroll();\n      }\n    });\n  }\n\n  private subscribeToTimelineChanges(): void {\n    this.timelineSubscription = this.store.select(TimelineState.getTimeline).subscribe(async (data) => {\n      this.publicationList = data;\n\n      if (data.publications.length && !this.getFirstPublicationReference()) {\n        this.store.dispatch(new SetTimelineFirstPublicationReference(data.publications[0]));\n        this.currentPublication = data.publications[0];\n      }\n\n      if (data.publications.length === 0 && this.store.selectSnapshot(AuthState.getUserId)) {\n        this.store.dispatch(new GetSuggestionsAction());\n        this.store.dispatch(new GetFollowedPages());\n        this.store.dispatch(new GetPendingRequestsAction());\n      }\n    });\n  }\n\n  private initLoaderIntersectors(): void {\n    // Intersector for next images\n    this.loaderBottomObserver = new IntersectionObserver(\n      async ([entry]) => {\n        if (!this.isLoadingPublications && entry && entry.isIntersecting) {\n          this.loadNextPublications();\n        }\n      },\n      {\n        root: this.publicationListContainer.nativeElement,\n        rootMargin: '100px',\n      }\n    );\n\n    this.loaderBottomObserver.observe(document.getElementById('loaderBottom'));\n\n    // Intersector for previous images\n    this.loaderTopObserver = new IntersectionObserver(\n      async ([entry]) => {\n        if (!this.isLoadingPublications && entry && entry.isIntersecting) {\n          this.loadPreviousPublications();\n        }\n      },\n      {\n        root: this.publicationListContainer.nativeElement,\n        rootMargin: '100px',\n      }\n    );\n\n    this.loaderTopObserver.observe(document.getElementById('loaderTop'));\n  }\n\n  private loadNextPublications(): void {\n    const lastPublication = this.publicationList.publications[this.publicationList.publications.length - 1];\n\n    if (!lastPublication) {\n      return;\n    }\n\n    const pageToRequest = lastPublication.page + 1;\n\n    if (pageToRequest > this.publicationList.total_pages) {\n      return;\n    }\n\n    this.store.dispatch(\n      new AddNextPublicationsToTimeline(\n        {\n          end_date: this.getFirstPublicationReference().creation_date,\n          limit: Constants.PUBLICATION_LOAD_LIMIT_TIMELINE,\n          order: 'desc',\n          page: pageToRequest,\n        },\n        MAX_LOADED_PAGES\n      )\n    );\n  }\n\n  private loadPreviousPublications(): void {\n    const firstPublication = this.publicationList.publications[0];\n\n    if (!firstPublication) {\n      return;\n    }\n\n    const pageToRequest = firstPublication.page - 1;\n\n    if (pageToRequest <= 0) {\n      return;\n    }\n\n    this.store.dispatch(\n      new AddPreviousPublicationsToTimeline(\n        {\n          end_date: this.getFirstPublicationReference().creation_date,\n          limit: Constants.PUBLICATION_LOAD_LIMIT_TIMELINE,\n          order: 'desd',\n          page: pageToRequest,\n        },\n        MAX_LOADED_PAGES\n      )\n    );\n  }\n\n  public showLikesList(publicationId) {\n    this.publicationId = publicationId;\n    this.utilsService.openIonSheet(ION_SHEET_TYPE.LIKES, this.publicationId);\n  }\n\n  public showCommentsList(publicationId) {\n    this.publicationId = publicationId;\n    this.utilsService.openIonSheet(ION_SHEET_TYPE.COMMENTS, this.publicationId);\n  }\n\n  public onPublicationButtonClick($event) {\n    const buttonPosition: number = $event.buttonPosition;\n    const publicationId: string = $event.publicationId;\n\n    console.log(buttonPosition, publicationId);\n    this.publicationId = publicationId;\n\n    switch (buttonPosition) {\n      case 0: // likes\n        this.changeLikeStatus(publicationId);\n        break;\n      case 1: // comments\n        this.showCommentsList(publicationId);\n        break;\n      case 2: // share on impulsyn\n        this.socialShare.sharePublication(publicationId);\n        break;\n      case 3: // share outside\n        break;\n    }\n  }\n\n  private subscribeToDOMPublicationListChanges(): void {\n    this.publicationListObserver = new MutationObserver(() => {\n      if (this.currentElementToScroll) {\n        this.publicationListContainer.nativeElement.scrollTop = this.currentElementToScroll.offsetTop;\n        this.scrollToElement();\n      }\n    });\n\n    this.publicationListObserver.observe(this.publicationListContainer.nativeElement, { childList: true });\n  }\n\n  private isTextOpened() {\n    const opened = document.getElementsByClassName('opened');\n    return opened.length > 0;\n  }\n\n  public onTouchStart(event: any): void {\n    if (this.isTextOpened() || this.isScrollInProgress) {\n      return;\n    }\n    this.swipeStartTime = Date.now();\n    this.touchStartPositionY = event.changedTouches[0].clientY;\n    this.lastTouchPositionY = this.touchStartPositionY;\n  }\n\n  public onTouchMove(event: any): void {\n    if (this.isTextOpened() || this.isScrollInProgress) {\n      return;\n    }\n    const currentTouchPositon: number = event.changedTouches[0].clientY;\n    this.publicationListContainer.nativeElement.scrollTop -= currentTouchPositon - this.lastTouchPositionY;\n    this.lastTouchPositionY += currentTouchPositon - this.lastTouchPositionY;\n  }\n\n  public onTouchEnd(event: any, index: number): void {\n    if (this.isTextOpened() || this.isScrollInProgress) {\n      return;\n    }\n    const distanceY = event.changedTouches[0].clientY - this.touchStartPositionY;\n    const elapsedTime = Date.now() - this.swipeStartTime;\n\n    if (!(elapsedTime <= this.swipeAllowedTime) || Math.abs(distanceY) < this.distanceThreshold) {\n      // if no swipe\n      this.calculatePublicationToShow(index);\n      return;\n    }\n\n    if (distanceY > 0) {\n      // swipe down\n      this.moveToPreviousPublication(index);\n    } else {\n      // swipe up\n      this.moveToNextPublication(index);\n    }\n  }\n\n  private moveToNextPublication(index: number): void {\n    const publicationListElements = this.getPublicationsElements();\n\n    if (index === publicationListElements.length - 1) {\n      return;\n    }\n\n    this.disableFocusOnPublication();\n\n    this.setCurrentElements(index + 1);\n    this.scrollToElement();\n  }\n\n  private moveToPreviousPublication(index: number): void {\n    if (index === 0) {\n      return;\n    }\n\n    this.disableFocusOnPublication();\n\n    this.setCurrentElements(index - 1);\n    this.scrollToElement();\n  }\n\n  private calculatePublicationToShow(index: number): void {\n    try {\n      const publicationListbounds = this.publicationListContainer.nativeElement.getBoundingClientRect();\n      const publicationListMiddlePosition = publicationListbounds.height / 2 + publicationListbounds.top;\n\n      const publicationListElements = this.getPublicationsElements();\n      const bounds = publicationListElements[index].getBoundingClientRect();\n\n      if (bounds.top > publicationListMiddlePosition) {\n        this.setCurrentElements(index - 1);\n        this.disableFocusOnPublication();\n      } else if (bounds.bottom < publicationListMiddlePosition) {\n        this.setCurrentElements(index + 1);\n        this.disableFocusOnPublication();\n      } else {\n        this.setCurrentElements(index);\n      }\n\n      this.scrollToElement();\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  private scrollToElement() {\n    this.isScrollInProgress = true;\n    window.requestAnimationFrame(this.smoothScroll());\n  }\n\n  private smoothScroll(): () => void {\n    const elementTop = this.currentElementToScroll.getBoundingClientRect().top;\n    const elementOffsetTop = this.currentElementToScroll.offsetTop;\n    return () => {\n      const scrollVelocity = elementTop > 0 ? this.scrollVelocity : -this.scrollVelocity;\n\n      const publicationListContainer = this.publicationListContainer.nativeElement;\n      const totalScroll = publicationListContainer.scrollTop + scrollVelocity;\n\n      if (scrollVelocity > 0) {\n        publicationListContainer.scrollTop = totalScroll > elementOffsetTop ? elementOffsetTop : totalScroll;\n      } else {\n        publicationListContainer.scrollTop = totalScroll < elementOffsetTop ? elementOffsetTop : totalScroll;\n      }\n\n      // if publication element top has not reach the publicationContainer top\n      if (\n        (totalScroll < elementOffsetTop && scrollVelocity > 0) ||\n        (totalScroll > elementOffsetTop && scrollVelocity < 0)\n      ) {\n        window.requestAnimationFrame(this.smoothScroll());\n      } else {\n        this.isScrollInProgress = false;\n      }\n    };\n  }\n\n  private getPublicationsElements(): HTMLCollectionOf<HTMLElement> {\n    return document\n      .getElementById('publicationListContainer')\n      .getElementsByClassName('publication-container') as HTMLCollectionOf<HTMLElement>;\n  }\n\n  public onNewPostClick($event): void {\n    this.router.navigate(['/create-post', this.profileId]);\n  }\n\n  public goUserProfile(publication: IPublication) {\n    this.utilsService.goProfile(publication.publisher.id, publication.publisher.type);\n  }\n\n  public doRefresh(event): void {\n    this.store.dispatch(new SetTimelineFirstPublicationReference(null));\n    const subscription = this.store\n      .dispatch(new GetTimeline({ limit: Constants.PUBLICATION_LOAD_LIMIT_TIMELINE }))\n      .subscribe(\n        () => {\n          subscription.unsubscribe();\n          event.target.complete();\n        },\n        (error) => {\n          subscription.unsubscribe();\n          event.target.complete();\n        }\n      );\n  }\n\n  private setCurrentElements(index: number): void {\n    this.currentElementToScroll = this.getPublicationsElements()[index];\n    this.currentPublication = this.publicationList.publications[index];\n  }\n\n  public getFirstPublicationReference(): IPublication {\n    return this.store.selectSnapshot(TimelineState.getFirstPublicationReference);\n  }\n\n  public newComment(comment) {\n    this.store.dispatch(new AddComment(comment, this.publicationId));\n  }\n\n  public likeComment(commentId: string) {\n    const comment = this.commentItems.find((item: IComment) => item.id === commentId);\n    if (comment) {\n      this.store.dispatch(new ChangeCommentLikeStatus({ ...comment }));\n    }\n  }\n\n  public centerPublicationScroll() {\n    if (!this.currentPublication) {\n      return;\n    }\n\n    const publicationsToShowIndex = findIndex(this.publicationList.publications, ['id', this.currentPublication.id]);\n    this.calculatePublicationToShow(publicationsToShowIndex);\n  }\n\n  private changeLikeStatus(publicationId: string) {\n    const pub: IPublication = this.publicationList.publications.find(\n      (publication: IPublication) => publication.id === publicationId\n    );\n    if (pub) {\n      this.store.dispatch(new ChangeLikeStatusTimeline(pub));\n    }\n  }\n\n  public trackByPublications(index: number, item: IPublication): string {\n    return item.id;\n  }\n\n  public onItemClick($event) {\n    this.utilsService.goProfile($event.model.id, !$event.isOrganization ? PUBLISHER_TYPE.USER : 0);\n  }\n\n  public onFollowPage($event) {\n    const index = this.itemsSuggestions.findIndex((item) => item.id === $event.id);\n    const organization = this.itemsSuggestions[index] as IOrganizationInfo;\n    this.store.dispatch(new FollowPageAction({ organization }));\n  }\n\n  public onRequestConnection($event) {\n    this.networkingService.requestConnectionUpdateList($event.id);\n  }\n\n  private disableFocusOnPublication(): void {\n    this.store.dispatch(new SetFocusOnPublication(false));\n  }\n\n  private disconnectObservers(): void {\n    if (this.loaderBottomObserver) {\n      this.loaderBottomObserver.disconnect();\n    }\n    if (this.loaderTopObserver) {\n      this.loaderTopObserver.disconnect();\n    }\n    if (this.publicationListObserver) {\n      this.publicationListObserver.disconnect();\n    }\n    if (this.timelineSubscription) {\n      this.timelineSubscription.unsubscribe();\n    }\n    if (this.tabEnterSubscription) {\n      this.tabEnterSubscription.unsubscribe();\n    }\n    if (this.subscriptionSuggestions) {\n      this.subscriptionSuggestions.unsubscribe();\n    }\n    if (this.subscriptionPages) {\n      this.subscriptionPages.unsubscribe();\n    }\n    if (this.subscriptionRequested) {\n      this.subscriptionRequested.unsubscribe();\n    }\n\n    if (this.focusOnPublicationSubscription) {\n      this.focusOnPublicationSubscription.unsubscribe();\n    }\n  }\n\n  ngOnDestroy() {\n    this.store.dispatch(new SetTimelineFirstPublicationReference(null));\n    this.disconnectObservers();\n  }\n}\n"],"sourceRoot":"webpack:///"}