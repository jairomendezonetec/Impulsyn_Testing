{"version":3,"sources":["./src/app/manage-admins-page/components/item-contact-invite/item-contact-invite.component.html","./src/app/manage-admins-page/invite/invite.page.html","./src/app/manage-admins-page/components/item-contact-invite/item-contact-invite.component.scss","./src/app/manage-admins-page/components/item-contact-invite/item-contact-invite.component.ts","./src/app/manage-admins-page/components/item-contact-invite/item-contact-invite.module.ts","./src/app/manage-admins-page/invite/invite-routing.module.ts","./src/app/manage-admins-page/invite/invite.module.ts","./src/app/manage-admins-page/invite/invite.page.scss","./src/app/manage-admins-page/invite/invite.page.ts"],"names":[],"mappings":"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","file":"invite-invite-module.js","sourcesContent":["export default \"<div class=\\\"item-profile\\\">\\n  <app-image-item [imageProfile]=\\\"info.photo\\\"></app-image-item>\\n  <div class=\\\"avatar-text col-xs-7 col-md-7\\\">\\n    <span class=\\\"small-size ion-text-capitalize\\\">{{ info.complete_name }}</span>\\n    <span class=\\\"small-size\\\">{{ info.occupation }}</span>\\n    <span class=\\\"small-size\\\" *ngIf=\\\"hasLocation\\\">\\n      {{ userLocation }}\\n    </span>\\n  </div>\\n  <div class=\\\"col-xs-3 col-md-3\\\">\\n    <ion-button color=\\\"secondary\\\" size=\\\"small\\\" (click)=\\\"inviteClickBtn()\\\">\\n      {{ 'organizationProfile.administratorsPage.inviteBtn' | translate }}\\n    </ion-button>\\n  </div>\\n</div>\\n\";","export default \"<app-header\\n  [title]=\\\"'organizationProfile.administratorsPage.invite' | translate\\\"\\n  [showBackButton]=\\\"showBackButton\\\"\\n  (backButtonClick)=\\\"goBack()\\\"\\n>\\n</app-header>\\n\\n<ion-content class=\\\"item-list\\\">\\n  <ion-searchbar (ionInput)=\\\"search($event)\\\"> </ion-searchbar>\\n\\n  <div *ngFor=\\\"let item of itemsSearch\\\">\\n    <app-item-contact-invite [info]=\\\"item\\\" (inviteEv)=\\\"invite($event)\\\" *ngIf=\\\"!isAdministrator(item)\\\">\\n    </app-item-contact-invite>\\n  </div>\\n</ion-content>\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21hbmFnZS1hZG1pbnMtcGFnZS9jb21wb25lbnRzL2l0ZW0tY29udGFjdC1pbnZpdGUvaXRlbS1jb250YWN0LWludml0ZS5jb21wb25lbnQuc2NzcyJ9 */\";","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { UserPublicInfo } from 'src/app/networking/models/user-public-info.model';\nimport { Utils } from '../../../@global/utils';\n\n@Component({\n  selector: 'app-item-contact-invite',\n  templateUrl: './item-contact-invite.component.html',\n  styleUrls: ['./item-contact-invite.component.scss'],\n})\nexport class ItemContactInviteComponent implements OnInit, OnChanges {\n  @Input() info: UserPublicInfo;\n  @Output() inviteEv = new EventEmitter<UserPublicInfo>();\n  public hasLocation: boolean;\n  public userLocation: string;\n\n  constructor() {}\n\n  ngOnInit() {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['info']?.currentValue) {\n      this.hasLocation = !!this.info.country;\n\n      if (this.hasLocation) {\n        this.userLocation = Utils.generateUserFriendlyLocation(\n          this.info.country,\n          this.info.region,\n          this.info.city,\n          this.info.province,\n          this.info.region_name\n        );\n      }\n    }\n  }\n\n  public inviteClickBtn() {\n    this.inviteEv.emit(this.info);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ItemContactInviteComponent } from './item-contact-invite.component';\nimport { IonicModule } from '@ionic/angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ImageItemModule } from '../../../@shared/components/image-item/image-item.module';\n\n@NgModule({\n  declarations: [ItemContactInviteComponent],\n  imports: [IonicModule, TranslateModule.forChild(), CommonModule, ImageItemModule],\n  exports: [ItemContactInviteComponent],\n})\nexport class ItemContactInviteModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { InvitePage } from './invite.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: InvitePage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class InvitePageRoutingModule {}\n","import { NgModule } from '@angular/core';\n\nimport { InvitePageRoutingModule } from './invite-routing.module';\n\nimport { InvitePage } from './invite.page';\nimport { SharedModule } from '../../@shared/shared.module';\nimport { ItemContactInviteModule } from '../components/item-contact-invite/item-contact-invite.module';\n\n@NgModule({\n  imports: [SharedModule, InvitePageRoutingModule, ItemContactInviteModule],\n  declarations: [InvitePage],\n})\nexport class InvitePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21hbmFnZS1hZG1pbnMtcGFnZS9pbnZpdGUvaW52aXRlLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { BasePage } from '../../base/base.page';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { Select, Store } from '@ngxs/store';\nimport { UtilsService } from '../../@core/utils.service';\nimport { Observable, Subscription } from 'rxjs';\nimport { UserPublicInfo } from 'src/API';\nimport { NetworkState } from '../../@store/network/network.state';\nimport { GetConnectionsAction } from 'src/app/@store/network/network.actions';\nimport { UserState } from 'src/app/@store/user/user.state';\nimport { PagesState } from 'src/app/@store/pages/pages.state';\nimport { IUserPublicInfo } from 'src/app/@shared/interfaces/user-public-info';\nimport { CreatePageAdministrator } from 'src/app/@store/pages/pages.actions';\n\n@Component({\n  selector: 'app-invite',\n  templateUrl: './invite.page.html',\n  styleUrls: ['./invite.page.scss'],\n})\nexport class InvitePage extends BasePage implements OnInit {\n  @Select(NetworkState.getContacts) userContactsList$: Observable<UserPublicInfo[]>;\n  private pageAdministratorsSubscription$: Subscription;\n  public pageAdministrators: IUserPublicInfo[] = [];\n  private profileId: string;\n  private subscriptionContacts$: Subscription;\n  public items: UserPublicInfo[];\n  public itemsSearch: UserPublicInfo[];\n\n  constructor(\n    router: Router,\n    location: Location,\n    store: Store,\n    utilsService: UtilsService,\n    private route: ActivatedRoute\n  ) {\n    super(location, router, store, utilsService);\n  }\n\n  ngOnInit() {\n    this.profileId = this.route.snapshot.params['profileId'];\n\n    const userId = this.store.selectSnapshot(UserState.getUserInfo)?.id;\n    this.store.dispatch(new GetConnectionsAction({ id: userId }));\n    this.loadConnections();\n    this.subscribeToPageAdministrators();\n  }\n\n  public invite(user: IUserPublicInfo) {\n    this.store.dispatch(new CreatePageAdministrator({ organizationId: this.profileId, user }));\n  }\n\n  private loadConnections(): void {\n    this.subscriptionContacts$ = this.userContactsList$.subscribe((data) => {\n      this.items = data;\n      this.initializeSearchList();\n    });\n  }\n\n  private subscribeToPageAdministrators() {\n    this.pageAdministratorsSubscription$ = this.store\n      .select(PagesState.getPageAdministrators)\n      .subscribe((data: IUserPublicInfo[]) => {\n        this.pageAdministrators = data;\n      });\n  }\n\n  public isAdministrator(item: UserPublicInfo) {\n    const isAdmin = this.pageAdministrators.find((admin) => admin.id === item.id);\n    return isAdmin ? true : false;\n  }\n\n  public search(event) {\n    this.initializeSearchList();\n\n    const val = event.target.value;\n\n    if (val && val.trim() !== '') {\n      this.itemsSearch = this.items.filter(\n        (it) => it.complete_name.toLowerCase().indexOf(val.trim().toLowerCase()) > -1\n      );\n    }\n  }\n\n  private initializeSearchList() {\n    this.itemsSearch = [...this.items];\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscriptionContacts$) {\n      this.subscriptionContacts$.unsubscribe();\n    }\n    if (this.pageAdministratorsSubscription$) {\n      this.pageAdministratorsSubscription$.unsubscribe();\n    }\n  }\n}\n"],"sourceRoot":"webpack:///"}