{"version":3,"sources":["./src/app/@shared/components/link-preview/link-preview.component.html","./src/app/create-post/create-post.page.html","./src/app/@core/link-preview.service.ts","./src/app/@shared/components/link-preview/link-preview.component.scss","./src/app/@shared/components/link-preview/link-preview.component.ts","./src/app/@shared/components/link-preview/link-preview.module.ts","./src/app/create-post/create-post-routing.module.ts","./src/app/create-post/create-post.module.ts","./src/app/create-post/create-post.page.scss","./src/app/create-post/create-post.page.ts"],"names":[],"mappings":"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","file":"create-post-create-post-module.js","sourcesContent":["export default \"<ion-card (click)=\\\"openLink($event)\\\" *ngIf=\\\"linkData\\\" class=\\\"link-preview\\\">\\n  <img *ngIf=\\\"linkData.image\\\" [src]=\\\"linkData.image\\\" alt=\\\"{{ 'Image site: ' + linkData.siteName }}\\\" />\\n  <ion-card-header>\\n    <ion-card-subtitle *ngIf=\\\"linkData.siteName\\\" class=\\\"ion-text-uppercase small-size\\\">{{\\n      linkData.siteName\\n    }}</ion-card-subtitle>\\n    <ion-card-title *ngIf=\\\"linkData.title\\\" class=\\\"big-size bold\\\">{{ linkData.title }}</ion-card-title>\\n  </ion-card-header>\\n  <ion-card-content *ngIf=\\\"linkData.description\\\">\\n    {{ linkData.description }}\\n  </ion-card-content>\\n</ion-card>\\n\";","export default \"<app-header\\n  [showBackButton]=\\\"showBackButton\\\"\\n  [title]=\\\"'createPost.title'\\\"\\n  [actionButton]=\\\"'createPost.post'\\\"\\n  (backButtonClick)=\\\"goBack()\\\"\\n  (actionButtonClick)=\\\"createPost()\\\"\\n></app-header>\\n\\n<ion-content>\\n  <div class=\\\"create-post-content\\\">\\n    <form [formGroup]=\\\"formGroup\\\">\\n      <!-- Publisher Option -->\\n      <div class=\\\"publisher-options-container\\\">\\n        <div class=\\\"publisher-option-image-border\\\">\\n          <div class=\\\"publisher-option-image\\\" [style.backgroundImage]=\\\"'url(' + profileImage + ')'\\\"></div>\\n        </div>\\n        <ion-select\\n          [formControlName]=\\\"'publisherId'\\\"\\n          okText=\\\"{{ 'buttons.accept' | translate}}\\\"\\n          cancelText=\\\"{{ 'buttons.cancel' | translate}}\\\"\\n          [interfaceOptions]=\\\"customActionSheetOptions\\\"\\n          interface=\\\"action-sheet\\\"\\n        >\\n          <ion-select-option *ngFor=\\\"let publisherOption of publisherOptionList\\\" [value]=\\\"publisherOption.id\\\">\\n            {{publisherOption.name}}</ion-select-option\\n          >\\n        </ion-select>\\n      </div>\\n\\n      <!-- Publication Description -->\\n      <ion-textarea\\n        class=\\\"small-size description-area\\\"\\n        inputmode=\\\"text\\\"\\n        rows=\\\"8\\\"\\n        [placeholder]=\\\"'createPost.descriptionPlaceholder' | translate\\\"\\n        [formControlName]=\\\"'description'\\\"\\n        [maxlength]=\\\"maxDescriptionSize\\\"\\n      >\\n      </ion-textarea>\\n      <div class=\\\"small-size description-counter\\\" [ngClass]=\\\"formGroup.get('description').invalid?'danger':''\\\">\\n        {{formGroup.get('description').value.length + '/' + maxDescriptionSize}}\\n      </div>\\n\\n      <!-- Publication Media Image -->\\n      <div *ngIf=\\\"postMedia?.type === mediaTypes.IMAGE\\\" class=\\\"publication-media-img ion-margin-top\\\">\\n        <img class=\\\"camera-media\\\" [src]=\\\"postMedia?.path\\\" />\\n        <ion-icon name=\\\"close-outline\\\" class=\\\"close-icon\\\" (click)=\\\"removeMedia()\\\"></ion-icon>\\n      </div>\\n\\n      <!-- Publication Media Video -->\\n      <div class=\\\"pr ion-margin-top inline-block\\\">\\n        <div *ngIf=\\\"postMedia?.type === mediaTypes.VIDEO\\\" class=\\\"publication-media-video\\\">\\n          <video\\n            id=\\\"videoMiniature\\\"\\n            class=\\\"camera-media\\\"\\n            preload=\\\"auto\\\"\\n            controls\\n            controlsList=\\\"nodownload\\\"\\n            disablepictureinpicture\\n          >\\n            <source [src]=\\\"postMedia?.path\\\" />\\n          </video>\\n          <ion-icon name=\\\"close-outline\\\" class=\\\"close-icon\\\" (click)=\\\"removeMedia()\\\"></ion-icon>\\n        </div>\\n      </div>\\n\\n      <!-- Publication Media Link -->\\n      <div *ngIf=\\\"postMedia?.type === mediaTypes.LINK\\\" class=\\\"publication-media-link ion-margin-top\\\">\\n        <app-link-preview [linkData]=\\\"postMedia.linkData\\\"></app-link-preview>\\n        <ion-icon name=\\\"close-outline\\\" class=\\\"close-icon\\\" (click)=\\\"removeMedia()\\\"></ion-icon>\\n      </div>\\n    </form>\\n  </div>\\n\\n  <div class=\\\"create-post-footer small-size ion-no-border\\\">\\n    <ion-list>\\n      <ion-item [disabled]=\\\"postMedia\\\" (click)=\\\"showSelectCameraMediaSource(camera.MediaType.PICTURE)\\\">\\n        <ion-icon name=\\\"image-outline\\\"></ion-icon>\\n        <ion-label>{{ 'createPost.addImage' | translate }}</ion-label>\\n      </ion-item>\\n      <ion-item [disabled]=\\\"postMedia\\\" (click)=\\\"showSelectCameraMediaSource(camera.MediaType.VIDEO)\\\">\\n        <ion-icon name=\\\"videocam-outline\\\"></ion-icon>\\n        <ion-label>{{ 'createPost.addVideo' | translate }}</ion-label>\\n      </ion-item>\\n    </ion-list>\\n  </div>\\n</ion-content>\\n\";","import { Injectable } from '@angular/core';\nimport { API, graphqlOperation } from 'aws-amplify';\nimport { getLinkMetadata } from '../../graphql/queries';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LinkPreviewService {\n  constructor() {}\n\n  public async getLinkPreview(url: string) {\n    return API.graphql(graphqlOperation(getLinkMetadata, { url }));\n  }\n}\n","export default \"ion-card.link-preview {\\n  width: 95%;\\n  margin: auto;\\n}\\nion-card.link-preview ion-card-content {\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  overflow: hidden;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvQHNoYXJlZC9jb21wb25lbnRzL2xpbmstcHJldmlldy9saW5rLXByZXZpZXcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxVQUFBO0VBQ0EsWUFBQTtBQUNGO0FBQUU7RUFDRSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0JBQUE7QUFFSiIsImZpbGUiOiJzcmMvYXBwL0BzaGFyZWQvY29tcG9uZW50cy9saW5rLXByZXZpZXcvbGluay1wcmV2aWV3LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNhcmQubGluay1wcmV2aWV3IHtcbiAgd2lkdGg6IDk1JTtcbiAgbWFyZ2luOiBhdXRvO1xuICBpb24tY2FyZC1jb250ZW50IHtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gIH1cbn1cbiJdfQ== */\";","import { Component, OnInit, Input } from '@angular/core';\nimport { UtilsService } from 'src/app/@core/utils.service';\nimport { UrlInfoModel } from './url-info.model';\n\n@Component({\n  selector: 'app-link-preview',\n  templateUrl: './link-preview.component.html',\n  styleUrls: ['./link-preview.component.scss'],\n})\nexport class LinkPreviewComponent implements OnInit {\n  @Input() linkData: UrlInfoModel;\n  constructor(private utilsService: UtilsService) {}\n\n  ngOnInit() {}\n\n  public openLink(event: any): void {\n    event.stopPropagation();\n    this.utilsService.openLink(this.linkData.url);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LinkPreviewComponent } from './link-preview.component';\nimport { IonicModule } from '@ionic/angular';\n\n@NgModule({\n  declarations: [LinkPreviewComponent],\n  imports: [IonicModule, CommonModule],\n  exports: [LinkPreviewComponent],\n})\nexport class LinkPreviewComponentModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CreatePostPage } from './create-post.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CreatePostPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CreatePostPageRoutingModule {}\n","import { NgModule } from '@angular/core';\n\nimport { CreatePostPageRoutingModule } from './create-post-routing.module';\n\nimport { CreatePostPage } from './create-post.page';\nimport { SharedModule } from '../@shared/shared.module';\nimport { LinkPreviewComponentModule } from '../@shared/components/link-preview/link-preview.module';\n\n@NgModule({\n  imports: [SharedModule, CreatePostPageRoutingModule, LinkPreviewComponentModule],\n  declarations: [CreatePostPage],\n})\nexport class CreatePostPageModule {}\n","export default \".create-post-content {\\n  padding: 16px 16px 100px 16px;\\n}\\n.create-post-content .publisher-options-container {\\n  display: flex;\\n}\\n.create-post-content .publisher-option-image-border {\\n  border: 1px var(--ion-color-secondary) solid;\\n  border-radius: 50%;\\n  padding: 1px;\\n  width: 40px;\\n  height: 40px;\\n}\\n.create-post-content .publisher-option-image-border .publisher-option-image {\\n  width: 100%;\\n  height: 100%;\\n  min-width: 36px;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n  background-size: cover;\\n  border-radius: 50%;\\n}\\n.create-post-content .publication-media-img {\\n  position: relative;\\n  width: 75px;\\n  height: 75px;\\n}\\n.create-post-content .publication-media-img img {\\n  width: 100%;\\n  height: 100%;\\n  border-radius: 15px;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n  -o-object-position: center;\\n     object-position: center;\\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\\n}\\n.create-post-content .publication-media-video {\\n  max-width: 100%;\\n  height: 150px;\\n  border-radius: 15px;\\n  overflow: hidden;\\n}\\n.create-post-content .publication-media-video video {\\n  max-width: 100%;\\n  max-height: 100%;\\n  border-radius: 15px;\\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\\n}\\n.create-post-content .close-icon {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  width: 25px;\\n  height: 25px;\\n  transform: translate(35%, -35%);\\n  color: white;\\n  background-color: var(--ion-color-secondary);\\n  border-radius: 50%;\\n}\\n.create-post-content .publication-media-link {\\n  position: relative;\\n  max-width: 80%;\\n  padding-bottom: 10px;\\n}\\n.create-post-content .publication-media-link .close-icon {\\n  right: 10px;\\n}\\n.create-post-footer {\\n  width: 100%;\\n  position: fixed;\\n  bottom: 0;\\n  background-color: #ffffff;\\n  border: 2px solid var(--ion-color-tertiary);\\n}\\n.create-post-footer ion-item {\\n  --background: white;\\n  --border-color: transparent;\\n}\\n.create-post-footer ion-item ion-label {\\n  margin-left: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY3JlYXRlLXBvc3QvY3JlYXRlLXBvc3QucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQ0UsNkJBQUE7QUFBRjtBQUVFO0VBQ0UsYUFBQTtBQUFKO0FBR0U7RUFDRSw0Q0FBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0FBREo7QUFHSTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLDJCQUFBO0VBQ0EsNEJBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0FBRE47QUFLRTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7QUFISjtBQUtJO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtFQUNBLG9CQUFBO0tBQUEsaUJBQUE7RUFDQSwwQkFBQTtLQUFBLHVCQUFBO0VBQ0EseUhBQUE7QUFITjtBQU9FO0VBQ0UsZUFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0FBTEo7QUFPSTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EseUhBQUE7QUFMTjtBQVNFO0VBQ0Usa0JBQUE7RUFDQSxNQUFBO0VBQ0EsUUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsK0JBQUE7RUFDQSxZQUFBO0VBQ0EsNENBQUE7RUFDQSxrQkFBQTtBQVBKO0FBVUU7RUFDRSxrQkFBQTtFQUNBLGNBQUE7RUFDQSxvQkFBQTtBQVJKO0FBU0k7RUFDRSxXQUFBO0FBUE47QUFhQTtFQUNFLFdBQUE7RUFDQSxlQUFBO0VBQ0EsU0FBQTtFQUNBLHlCQUFBO0VBQ0EsMkNBQUE7QUFWRjtBQVlFO0VBQ0UsbUJBQUE7RUFDQSwyQkFBQTtBQVZKO0FBWUk7RUFDRSxnQkFBQTtBQVZOIiwiZmlsZSI6InNyYy9hcHAvY3JlYXRlLXBvc3QvY3JlYXRlLXBvc3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29udGVudFxuLmNyZWF0ZS1wb3N0LWNvbnRlbnQge1xuICBwYWRkaW5nOiAxNnB4IDE2cHggMTAwcHggMTZweDtcblxuICAucHVibGlzaGVyLW9wdGlvbnMtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICB9XG5cbiAgLnB1Ymxpc2hlci1vcHRpb24taW1hZ2UtYm9yZGVyIHtcbiAgICBib3JkZXI6IDFweCB2YXIoLS1pb24tY29sb3Itc2Vjb25kYXJ5KSBzb2xpZDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgcGFkZGluZzogMXB4O1xuICAgIHdpZHRoOiA0MHB4O1xuICAgIGhlaWdodDogNDBweDtcblxuICAgIC5wdWJsaXNoZXItb3B0aW9uLWltYWdlIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgbWluLXdpZHRoOiAzNnB4O1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xuICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgfVxuICB9XG5cbiAgLnB1YmxpY2F0aW9uLW1lZGlhLWltZyB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHdpZHRoOiA3NXB4O1xuICAgIGhlaWdodDogNzVweDtcblxuICAgIGltZyB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gICAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgICAgIG9iamVjdC1wb3NpdGlvbjogY2VudGVyO1xuICAgICAgYm94LXNoYWRvdzogcmdiKDAgMCAwIC8gMjAlKSAwcHggM3B4IDFweCAtMnB4LCByZ2IoMCAwIDAgLyAxNCUpIDBweCAycHggMnB4IDBweCwgcmdiKDAgMCAwIC8gMTIlKSAwcHggMXB4IDVweCAwcHg7XG4gICAgfVxuICB9XG5cbiAgLnB1YmxpY2F0aW9uLW1lZGlhLXZpZGVvIHtcbiAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxNTBweDtcbiAgICBib3JkZXItcmFkaXVzOiAxNXB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG5cbiAgICB2aWRlbyB7XG4gICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICBtYXgtaGVpZ2h0OiAxMDAlO1xuICAgICAgYm9yZGVyLXJhZGl1czogMTVweDtcbiAgICAgIGJveC1zaGFkb3c6IHJnYigwIDAgMCAvIDIwJSkgMHB4IDNweCAxcHggLTJweCwgcmdiKDAgMCAwIC8gMTQlKSAwcHggMnB4IDJweCAwcHgsIHJnYigwIDAgMCAvIDEyJSkgMHB4IDFweCA1cHggMHB4O1xuICAgIH1cbiAgfVxuXG4gIC5jbG9zZS1pY29uIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIHJpZ2h0OiAwO1xuICAgIHdpZHRoOiAyNXB4O1xuICAgIGhlaWdodDogMjVweDtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgzNSUsIC0zNSUpO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pb24tY29sb3Itc2Vjb25kYXJ5KTtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIH1cblxuICAucHVibGljYXRpb24tbWVkaWEtbGluayB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIG1heC13aWR0aDogODAlO1xuICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICAgIC5jbG9zZS1pY29uIHtcbiAgICAgIHJpZ2h0OiAxMHB4O1xuICAgIH1cbiAgfVxufVxuXG4vLyBGb290ZXJcbi5jcmVhdGUtcG9zdC1mb290ZXIge1xuICB3aWR0aDogMTAwJTtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBib3R0b206IDA7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XG4gIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWlvbi1jb2xvci10ZXJ0aWFyeSk7XG5cbiAgaW9uLWl0ZW0ge1xuICAgIC0tYmFja2dyb3VuZDogd2hpdGU7XG4gICAgLS1ib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1xuXG4gICAgaW9uLWxhYmVsIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7XG4gICAgfVxuICB9XG59XG4iXX0= */\";","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { BasePage } from '../base/base.page';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Store } from '@ngxs/store';\nimport { UtilsService } from '../@core/utils.service';\nimport { Location } from '@angular/common';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { PagesState } from '../@store/pages/pages.state';\nimport { UserState } from '../@store/user/user.state';\nimport { AuthState } from '../@store/auth/auth.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Camera } from '@ionic-native/camera/ngx';\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\nimport { WebView } from '@ionic-native/ionic-webview';\nimport { environment } from '@env/environment';\nimport { CaptureVideoOptions, MediaCapture } from '@ionic-native/media-capture/ngx';\nimport { Subscription } from 'rxjs';\nimport { Utils } from '../@global/utils';\nimport { UrlInfoModel } from '../@shared/components/link-preview/url-info.model';\nimport { LinkPreviewService } from '../@core/link-preview.service';\nimport { PublicationInput } from '../../API';\nimport {\n  CreatePost,\n  UploadPagePostImage,\n  UploadPagePostVideo,\n  UploadPostImage,\n  UploadPostVideo,\n} from '../@store/posts/posts.actions';\nimport { IFile } from '@ionic-native/file/ngx';\nimport { InformService } from '../@core/inform.service';\nimport { PostsState } from '../@store/posts/posts.state';\nimport { Constants } from '../@global/constants';\nimport { PUBLICATION_TYPE } from '../@shared/enums/publication-type';\n\nenum PUBLISHER_TYPES {\n  USER_PROFILE = 'USER_PROFILE',\n  ORGANIZATION = 'ORGANIZATION',\n}\ninterface IPublisherOption {\n  id: string;\n  name: string;\n  photo: string;\n  type: PUBLISHER_TYPES;\n}\n\nexport interface IPostMedia {\n  type: PUBLICATION_TYPE;\n  file?: IFile;\n  path?: SafeUrl;\n  originalPath?: string;\n  linkData?: UrlInfoModel;\n}\n\n@Component({\n  selector: 'app-create-post',\n  templateUrl: './create-post.page.html',\n  styleUrls: ['./create-post.page.scss'],\n})\nexport class CreatePostPage extends BasePage implements OnInit, OnDestroy {\n  public formGroup: FormGroup;\n  public publisherOptionList: IPublisherOption[] = [];\n  public selectedPublisherOption: IPublisherOption;\n  public actionButtonTitle = 'Post';\n  public postInProcess = false;\n\n  public postMedia: IPostMedia;\n  public mediaTypes = PUBLICATION_TYPE;\n\n  public publisherIdSubscription$: Subscription;\n  public descriptionSubscription$: Subscription;\n\n  public customActionSheetOptions: any;\n  public label: string;\n  public profileImage: string;\n\n  public maxDescriptionSize = Constants.MAX_PUBLICATION_DESCRIPTION_SIZE;\n\n  private profileId = '';\n\n  constructor(\n    location: Location,\n    router: Router,\n    store: Store,\n    utilsService: UtilsService,\n    public camera: Camera,\n    private formBuilder: FormBuilder,\n    private translate: TranslateService,\n    private domSanitizer: DomSanitizer,\n    private mediaCapture: MediaCapture,\n    private linkPreviewService: LinkPreviewService,\n    private informService: InformService,\n    private route: ActivatedRoute\n  ) {\n    super(location, router, store, utilsService);\n  }\n\n  ngOnInit() {\n    this.profileId = this.route.snapshot.params['profileId'];\n    this.label = this.translate.instant(`createPost.selectHeader`);\n\n    this.customActionSheetOptions = {\n      header: this.label,\n      translucent: true,\n    };\n\n    this.publisherOptionList = this.getPublisherList();\n    this.selectedPublisherOption = this.publisherOptionList[0];\n    this.initForm();\n    this.subscribeToPublisherOptionChanges();\n    this.subscribeToDescriptionChanges();\n    this.profileImage = this.selectedPublisherOption?.photo;\n  }\n\n  doIonViewWillEnter() {\n    this.postInProcess = false;\n  }\n\n  private initForm(): void {\n    this.formGroup = this.formBuilder.group({\n      publisherId: [this.selectedPublisherOption.id, [Validators.required]],\n      description: ['', [Validators.maxLength(this.maxDescriptionSize)]],\n    });\n  }\n\n  private getPublisherList(): IPublisherOption[] {\n    const userInfo = this.store.selectSnapshot(UserState.getUserInfo);\n\n    const userPublisherOption: IPublisherOption = {\n      id: this.store.selectSnapshot(AuthState.getUserId),\n      name: userInfo.complete_name,\n      photo: this.store.selectSnapshot(UserState.getUserInfo).photo,\n      type: PUBLISHER_TYPES.USER_PROFILE,\n    };\n\n    const organizationPublisherOptions: IPublisherOption[] = [];\n\n    for (const page of this.store.selectSnapshot(PagesState.getUserPageList)) {\n      organizationPublisherOptions.push({\n        id: page.id,\n        name: page.complete_name,\n        photo: page.photo,\n        type: PUBLISHER_TYPES.ORGANIZATION,\n      });\n    }\n\n    // Find publisher id in options and set on the top of the array\n    const options = [userPublisherOption, ...organizationPublisherOptions];\n    const from = options.findIndex((el) => el.id === this.profileId);\n    options.splice(0, 0, options.splice(from, 1)[0]);\n\n    return options;\n  }\n\n  private subscribeToPublisherOptionChanges(): void {\n    this.publisherIdSubscription$ = this.formGroup.get('publisherId').valueChanges.subscribe((publisherId: string) => {\n      this.selectedPublisherOption = this.publisherOptionList.find((element) => element.id === publisherId);\n      this.profileImage = this.selectedPublisherOption?.photo;\n    });\n  }\n\n  // TODO when link component is in this project: handle error when url is invalid\n  private subscribeToDescriptionChanges(): void {\n    let timeout: NodeJS.Timeout;\n\n    this.descriptionSubscription$ = this.formGroup.get('description').valueChanges.subscribe((description: string) => {\n      // if there's already some media content link will not be added\n      if ((this.postMedia && this.postMedia.type !== PUBLICATION_TYPE.LINK) || !description) {\n        return;\n      }\n\n      if (timeout) {\n        // if there is a change in the description cancel the previous timeout\n        clearTimeout(timeout);\n      }\n\n      // wait 500 ms to let user finish write\n      timeout = setTimeout(() => {\n        const url = Utils.getFirstUrlMatch(description);\n\n        if (url) {\n          this.getLinkMedia(url);\n        } else {\n          this.removeMedia();\n        }\n      }, 1000);\n    });\n  }\n\n  public async showSelectCameraMediaSource(cameraMediaType: number): Promise<void> {\n    const buttons = [\n      {\n        text: 'cameraOptions.gallery',\n        handler: () => {\n          this.getMedia(this.camera.PictureSourceType.PHOTOLIBRARY, cameraMediaType);\n        },\n      },\n      {\n        text: 'cameraOptions.camera',\n        handler: () => {\n          this.getMedia(this.camera.PictureSourceType.CAMERA, cameraMediaType);\n        },\n      },\n      { text: 'buttons.cancel' },\n    ];\n\n    await this.utilsService.showActionSheet('cameraOptions.actionSheetTitle', buttons);\n  }\n\n  private async getMedia(sourceType: number, mediaType: number): Promise<void> {\n    try {\n      const isVideoFromCamera =\n        sourceType === this.camera.PictureSourceType.CAMERA && mediaType === this.camera.MediaType.VIDEO;\n\n      const { imageSource, imageOriginalPath } = isVideoFromCamera\n        ? await this.captureVideo()\n        : await this.utilsService.getMediaFromCameraPlugin(sourceType, mediaType);\n\n      const { path, filename } = Utils.getPathAndFilenameFromUrl(imageOriginalPath);\n      const file = await this.utilsService.getFileFromSystemPath(path, filename);\n\n      this.postMedia = {\n        path: imageSource,\n        originalPath: imageOriginalPath,\n        type: mediaType === this.camera.MediaType.PICTURE ? PUBLICATION_TYPE.IMAGE : PUBLICATION_TYPE.VIDEO,\n        file,\n      };\n\n      if (this.postMedia.type === PUBLICATION_TYPE.VIDEO && !Utils.isVideoMediaType(file.type)) {\n        this.informService.showWarning('createPost.wrongVideoType');\n        this.removeMedia();\n      }\n\n      if (this.postMedia.type === PUBLICATION_TYPE.IMAGE && !Utils.isImageMediaType(file.type)) {\n        this.informService.showWarning('createPost.wrongImageType');\n        this.removeMedia();\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  private async captureVideo(): Promise<{ imageSource: SafeUrl; imageOriginalPath: string }> {\n    const options: CaptureVideoOptions = { limit: 1, duration: Constants.CAPTURE_MEDIA_FILE_DURATION };\n\n    try {\n      const data = await this.mediaCapture.captureVideo(options);\n      const mediaPath = this.utilsService.fixFileUri(data[0].fullPath);\n      return {\n        imageSource: this.domSanitizer.bypassSecurityTrustUrl(WebView.convertFileSrc(mediaPath)),\n        imageOriginalPath: mediaPath,\n      };\n    } catch (error) {\n      console.error('[CreatePost takeVideo] error taking a video');\n      console.error(error);\n\n      throw error;\n    }\n  }\n\n  private getLinkMedia(link: string): void {\n    this.linkPreviewService.getLinkPreview(link).then(\n      (res: any) => {\n        this.postMedia = {\n          type: PUBLICATION_TYPE.LINK,\n          linkData: res.data.getLinkMetadata,\n        };\n      },\n      (error: any) => {\n        this.removeMedia();\n        console.error('[CreatePost getLinkMedia] error getting link media data');\n        console.error(error);\n      }\n    );\n  }\n\n  public removeMedia(): void {\n    this.postMedia = null;\n  }\n\n  public async createPost(): Promise<void> {\n    if (!this.isValidPost()) {\n      this.informService.showWarning('createPost.invalidPost');\n      return;\n    }\n\n    if (this.formGroup.get('description').value.length > this.maxDescriptionSize) {\n      this.informService.showWarning('formValidations.maxLength');\n      return;\n    }\n\n    if (this.postInProcess) {\n      return;\n    }\n    this.postInProcess = true;\n\n    try {\n      let mediaKey: string;\n      if (this.hasPostMediaImage()) {\n        await this.uploadPostImageToS3();\n        mediaKey = this.store.selectSnapshot(PostsState.getCurrentPostInput).content;\n        await this.sendPost(mediaKey);\n      } else if (this.hasPostMediaVideo()) {\n        // video publication must be created first, so whe have the publication id and publisher\n        // id to send as metadata, in order to process it after video processing\n        await this.sendPost();\n        await this.uploadPostVideoToS3(this.store.selectSnapshot(PostsState.getLastCreatedPostId));\n      } else if (this.isLinkWithMediaContent()) {\n        mediaKey = this.postMedia.linkData.image;\n        await this.sendPost(mediaKey);\n      } else {\n        await this.sendPost();\n      }\n\n      this.onPublicationPosted();\n    } catch (error) {\n      console.error('[CreatePost createPost] error creating a new post');\n      console.error(error);\n      this.postInProcess = false;\n    }\n  }\n\n  private onPublicationPosted(): void {\n    if (this.postMedia && this.postMedia.type === PUBLICATION_TYPE.VIDEO) {\n      this.informService.showInfo('createPost.postVideoCreatedSuccess', 5000, 'bottom');\n    } else {\n      this.informService.showInfo('createPost.postCreatedSuccess', 3000, 'bottom');\n    }\n    this.goBack();\n  }\n\n  private hasPostMediaImage(): boolean {\n    return this.postMedia && this.postMedia.type === PUBLICATION_TYPE.IMAGE;\n  }\n\n  private hasPostMediaVideo(): boolean {\n    return this.postMedia && this.postMedia.type === PUBLICATION_TYPE.VIDEO;\n  }\n\n  private isLinkWithMediaContent(): boolean {\n    return this.postMedia && this.postMedia.type === PUBLICATION_TYPE.LINK && !!this.postMedia.linkData.image;\n  }\n\n  private async uploadPostImageToS3(): Promise<any> {\n    const file = this.postMedia.file;\n    let filename = Constants.PUBLICATIONS_FOLDER + '/' + Utils.generateFileUniqueName(file);\n\n    const { isSizeValid } = await Utils.checkPostMediaLimits(this.postMedia);\n\n    if (!isSizeValid) {\n      this.informService.showWarning('createPost.invalidFileSize');\n      throw new Error('invalidFileSize');\n    }\n\n    if (this.selectedPublisherOption.type === PUBLISHER_TYPES.USER_PROFILE) {\n      await this.store.dispatch(new UploadPostImage({ filename, file, type: file.type })).toPromise();\n    } else {\n      filename = `${Constants.PRIVATE_FOLDER}/${this.selectedPublisherOption.id}/${filename}`;\n      await this.store\n        .dispatch(\n          new UploadPagePostImage({\n            filename,\n            file,\n            type: file.type,\n            pageId: this.selectedPublisherOption.id,\n            bucket: environment.mediaBucket,\n          })\n        )\n        .toPromise();\n    }\n  }\n\n  private async uploadPostVideoToS3(publicationid: string): Promise<any> {\n    const file = this.postMedia.file;\n    let filename = Constants.PUBLICATIONS_FOLDER + '/' + Utils.generateFileUniqueName(file);\n\n    const videoElement = document.getElementById('videoMiniature') as HTMLVideoElement;\n    const { isSizeValid, isDurationValid } = await Utils.checkPostMediaLimits(this.postMedia, videoElement.duration);\n\n    if (!isSizeValid) {\n      this.informService.showWarning('createPost.invalidFileSize');\n      throw new Error('invalidFileSize');\n    }\n\n    if (!isDurationValid) {\n      this.informService.showWarning('createPost.invalidVideoDuration');\n      throw new Error('invalidVideoDuration');\n    }\n\n    const metadata = {\n      publicationid,\n      publisherid: this.store.selectSnapshot(AuthState.getUserId),\n      stage: environment.stage,\n    };\n\n    if (this.selectedPublisherOption.type === PUBLISHER_TYPES.USER_PROFILE) {\n      await this.store\n        .dispatch(\n          new UploadPostVideo({\n            filename,\n            file,\n            type: file.type,\n            bucket: environment.videoBucket,\n            metadata,\n            mediaWidth: videoElement.videoWidth,\n            mediaHeight: videoElement.videoHeight,\n          })\n        )\n        .toPromise();\n    } else {\n      filename = `${Constants.PRIVATE_FOLDER}/${this.selectedPublisherOption.id}/${filename}`;\n      await this.store\n        .dispatch(\n          new UploadPagePostVideo({\n            filename,\n            file,\n            type: file.type,\n            bucket: environment.videoBucket,\n            metadata,\n            mediaWidth: videoElement.videoWidth,\n            mediaHeight: videoElement.videoHeight,\n            pageId: this.selectedPublisherOption.id,\n          })\n        )\n        .toPromise();\n    }\n  }\n\n  private async sendPost(mediaKey?: string): Promise<void> {\n    const postPayload: PublicationInput = {\n      publication_type: this.postMedia ? this.postMedia.type : PUBLICATION_TYPE.TEXT,\n      content: mediaKey,\n      description: this.formGroup.get('description').value.trim(),\n      link_site: this.postMedia?.linkData?.siteName,\n      link_title: this.postMedia?.linkData?.title,\n      link_url: this.postMedia?.linkData?.url,\n    };\n\n    await this.store\n      .dispatch(\n        new CreatePost({\n          publisher_id: this.selectedPublisherOption.id,\n          input: postPayload,\n        })\n      )\n      .toPromise();\n  }\n\n  private isValidPost(): boolean {\n    return !!this.postMedia || !!this.formGroup.get('description').value;\n  }\n\n  private disconnectObservers(): void {\n    try {\n      this.publisherIdSubscription$.unsubscribe();\n      this.descriptionSubscription$.unsubscribe();\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  ngOnDestroy() {\n    this.disconnectObservers();\n  }\n}\n"],"sourceRoot":"webpack:///"}