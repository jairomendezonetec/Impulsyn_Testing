{"version":3,"sources":["./src/app/change-password/change-password.page.html","./src/app/change-password/change-password-routing.module.ts","./src/app/change-password/change-password.module.ts","./src/app/change-password/change-password.page.scss","./src/app/change-password/change-password.page.ts"],"names":[],"mappings":"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","file":"change-password-change-password-module.js","sourcesContent":["export default \"<app-header [showBackButton]=\\\"showBackButton\\\" [title]=\\\"'changePass.title'\\\" (backButtonClick)=\\\"goBack()\\\"></app-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <div class=\\\"flex-container\\\">\\n    <form [formGroup]=\\\"formGroup\\\">\\n      <ion-row class=\\\"flex-item\\\">\\n        <ion-col size=\\\"12\\\" class=\\\"ion-text-center\\\">\\n          <div class=\\\"screen-big-title\\\" color=\\\"secondary\\\">{{ 'changePass.title2' | translate }}</div>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row class=\\\"flex-item ion-justify-content-center ion-padding-bottom ion-margin-bottom\\\">\\n        <div class=\\\"pr col-xs-10 col-sm-8 col-lg-6\\\">\\n          <ion-item lines=\\\"full\\\" class=\\\"ion-margin\\\">\\n            <ion-label appPlatformMode>{{'formFields.currentPass' | translate}}</ion-label>\\n            <ion-input\\n              [type]=\\\"seePassword ? 'text' : 'password'\\\"\\n              name=\\\"password\\\"\\n              [formControlName]=\\\"'password'\\\"\\n              required\\n              maxlength=\\\"25\\\"\\n              data-test=\\\"password-input\\\"\\n              class=\\\"pass-input\\\"\\n            ></ion-input>\\n            <app-icon-clicked\\n              color=\\\"secondary\\\"\\n              class=\\\"extrabig-size icon-input-end\\\"\\n              (buttonClick)=\\\"onSeePassword($event)\\\"\\n              [iconNameInitial]=\\\"'eye-outline'\\\"\\n              [iconNameTapped]=\\\"'eye-off-outline'\\\"\\n            ></app-icon-clicked>\\n          </ion-item>\\n          <app-show-errors [control]=\\\"formGroup.controls['password']\\\"></app-show-errors>\\n        </div>\\n        <div class=\\\"pr col-xs-10 col-sm-8 col-lg-6\\\">\\n          <ion-item lines=\\\"full\\\" class=\\\"ion-margin\\\">\\n            <ion-label appPlatformMode>{{'formFields.newPass' | translate}}</ion-label>\\n            <ion-input\\n              [type]=\\\"seeNewPassword ? 'text' : 'password'\\\"\\n              name=\\\"password\\\"\\n              [formControlName]=\\\"'newPassword'\\\"\\n              required\\n              maxlength=\\\"25\\\"\\n              data-test=\\\"password-input\\\"\\n            ></ion-input>\\n            <app-icon-clicked\\n              color=\\\"secondary\\\"\\n              class=\\\"extrabig-size icon-input-end\\\"\\n              (buttonClick)=\\\"onSeeNewPassword($event)\\\"\\n              [iconNameInitial]=\\\"'eye-outline'\\\"\\n              [iconNameTapped]=\\\"'eye-off-outline'\\\"\\n            ></app-icon-clicked>\\n          </ion-item>\\n          <app-show-errors [control]=\\\"formGroup.controls['newPassword']\\\"></app-show-errors>\\n        </div>\\n      </ion-row>\\n      <app-action-button (actionButtonClick)=\\\"changePass()\\\" [buttonText]=\\\"'buttons.accept'\\\"></app-action-button>\\n    </form>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ChangePasswordPage } from './change-password.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChangePasswordPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ChangePasswordPageRoutingModule {}\n","import { NgModule } from '@angular/core';\n\nimport { ChangePasswordPageRoutingModule } from './change-password-routing.module';\n\nimport { ChangePasswordPage } from './change-password.page';\nimport { SharedModule } from '../@shared/shared.module';\n\n@NgModule({\n  imports: [SharedModule, ChangePasswordPageRoutingModule],\n  declarations: [ChangePasswordPage],\n})\nexport class ChangePasswordPageModule {}\n","export default \".flex-vertical-space .flex-container {\\n  justify-content: start;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2hhbmdlLXBhc3N3b3JkL2NoYW5nZS1wYXNzd29yZC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBQTtBQUNGIiwiZmlsZSI6InNyYy9hcHAvY2hhbmdlLXBhc3N3b3JkL2NoYW5nZS1wYXNzd29yZC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZmxleC12ZXJ0aWNhbC1zcGFjZSAuZmxleC1jb250YWluZXIge1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHN0YXJ0O1xufVxuIl19 */\";","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Actions, ofActionSuccessful, Store } from '@ngxs/store';\nimport { take } from 'rxjs/operators';\nimport { FormCustomValidators } from '../@shared/validators/form-custom-validators';\nimport { ChangeUserPassword } from '../@store/auth/auth.actions';\nimport { BasePage } from '../base/base.page';\nimport { Location } from '@angular/common';\nimport { UtilsService } from '../@core/utils.service';\nimport { Constants } from '../@global/constants';\nimport { InformService } from '../@core/inform.service';\nimport { UserState } from '../@store/user/user.state';\nimport { StorageService } from '../@core/storage.service';\nimport { CredentialsModel } from '../login/model/credentials';\n\n@Component({\n  selector: 'app-change-password',\n  templateUrl: './change-password.page.html',\n  styleUrls: ['./change-password.page.scss'],\n})\nexport class ChangePasswordPage extends BasePage implements OnInit {\n  public formGroup: FormGroup;\n  public seePassword = false;\n  public seeNewPassword = false;\n\n  constructor(\n    router: Router,\n    location: Location,\n    store: Store,\n    utilsService: UtilsService,\n    private formBuilder: FormBuilder,\n    private actions: Actions,\n    private informService: InformService,\n    private storage: StorageService\n  ) {\n    super(location, router, store, utilsService);\n  }\n\n  ngOnInit() {\n    this.initForm();\n\n    this.actions.pipe(ofActionSuccessful(ChangeUserPassword)).subscribe((data) => {\n      console.log('Data from aws');\n      console.dir(data);\n    });\n  }\n\n  private initForm(): void {\n    this.formGroup = this.formBuilder.group({\n      password: ['', Validators.required],\n      newPassword: ['', [Validators.required, FormCustomValidators.validatePassPattern]],\n    });\n  }\n\n  public onSeePassword($event) {\n    this.seePassword = !this.seePassword;\n  }\n\n  public onSeeNewPassword($event) {\n    this.seeNewPassword = !this.seeNewPassword;\n  }\n\n  public changePass() {\n    if (this.utilsService.isValidForm(this.formGroup)) {\n      this.store\n        .dispatch(\n          new ChangeUserPassword({\n            user: null,\n            oldPassword: this.formGroup.get('password').value,\n            newPassword: this.formGroup.get('newPassword').value,\n          })\n        )\n        .pipe(take(1))\n        .subscribe(\n          () => {\n            this.informService.showInfo('formValidations.changePassSuccess');\n            this.setUserCredentials(\n              this.store.selectSnapshot(UserState.getUserInfo).email,\n              this.formGroup.get('newPassword').value\n            );\n            this.router.navigate([Constants.FIRST_PAGE_AFTER_LOGIN]);\n          },\n          (error: any) => {\n            console.log(error);\n          }\n        );\n    }\n  }\n\n  private setUserCredentials(username: string, password: string): void {\n    const userCredentials = new CredentialsModel(username, password);\n    this.storage.setCredentials(userCredentials);\n  }\n}\n"],"sourceRoot":"webpack:///"}