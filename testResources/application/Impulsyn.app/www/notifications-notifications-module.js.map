{"version":3,"sources":["./src/app/notifications/item-notification/item-notification.component.html","./src/app/notifications/notifications.page.html","./src/app/notifications/item-notification/item-notification.component.scss","./src/app/notifications/item-notification/item-notification.component.ts","./src/app/notifications/item-notification/item-notification.module.ts","./src/app/notifications/notifications-routing.module.ts","./src/app/notifications/notifications.module.ts","./src/app/notifications/notifications.page.scss","./src/app/notifications/notifications.page.ts"],"names":[],"mappings":"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","file":"notifications-notifications-module.js","sourcesContent":["export default \"<div class=\\\"item-profile\\\" [ngClass]=\\\"{ 'notification-not-readed': !notification.read }\\\" (click)=\\\"onNotificationClick()\\\">\\n  <app-image-item [imageProfile]=\\\"notification.sender?.photo\\\" (imageClick)=\\\"onImageClick()\\\"></app-image-item>\\n  <div class=\\\"notification-text col-xs-9\\\">\\n    <span class=\\\"ion-margin-start small-size notification-lines\\\">{{ notification.message }}</span>\\n  </div>\\n  <div class=\\\"avatar-text col-xs-3\\\">\\n    <span class=\\\"extra-small-size date\\\" color=\\\"secondary\\\">{{ notification.creation_date }}</span>\\n  </div>\\n</div>\\n\";","export default \"<ion-content>\\n  <app-empty-message\\n    *ngIf=\\\"!notificationList || notificationList?.notifications?.length <= 0\\\"\\n    [text]=\\\"'notificationsPage.noNotifications'\\\"\\n    [iconName]=\\\"'alert-circle-outline'\\\"\\n  ></app-empty-message>\\n  <div\\n    *ngIf=\\\"notificationList?.notifications?.length > 0 && existUnreadNotification()\\\"\\n    class=\\\"ion-text-end ion-padding\\\"\\n  >\\n    <a href=\\\"#\\\" (click)=\\\"markAsReadAll($event)\\\" class=\\\"regular-small-size\\\"\\n      >{{ 'notificationsPage.markAsRead' | translate}}</a\\n    >\\n  </div>\\n  <ion-list>\\n    <div *ngFor=\\\"let item of notificationList?.notifications\\\">\\n      <app-item-notification [info]=\\\"item\\\"></app-item-notification>\\n    </div>\\n  </ion-list>\\n  <ion-infinite-scroll (ionInfinite)=\\\"getNextNotifications($event)\\\" *ngIf=\\\"!hideInfiniteScroll\\\">\\n    <ion-infinite-scroll-content> </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\\n\";","export default \".item-profile.notification-not-readed {\\n  background: var(--notification-not-readed);\\n}\\n.item-profile.notification-not-readed span {\\n  font-weight: 600;\\n}\\n.item-profile.notification-not-readed .date {\\n  color: var(--ion-color-dark);\\n}\\n.item-profile .date {\\n  color: var(--ion-color-secondary);\\n}\\n.item-profile .notification-text {\\n  overflow: hidden;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbm90aWZpY2F0aW9ucy9pdGVtLW5vdGlmaWNhdGlvbi9pdGVtLW5vdGlmaWNhdGlvbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtFQUNFLDBDQUFBO0FBQUo7QUFDSTtFQUNFLGdCQUFBO0FBQ047QUFDSTtFQUNFLDRCQUFBO0FBQ047QUFFRTtFQUNFLGlDQUFBO0FBQUo7QUFHRTtFQUNFLGdCQUFBO0FBREoiLCJmaWxlIjoic3JjL2FwcC9ub3RpZmljYXRpb25zL2l0ZW0tbm90aWZpY2F0aW9uL2l0ZW0tbm90aWZpY2F0aW9uLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLml0ZW0tcHJvZmlsZSB7XG4gICYubm90aWZpY2F0aW9uLW5vdC1yZWFkZWQge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLW5vdGlmaWNhdGlvbi1ub3QtcmVhZGVkKTtcbiAgICBzcGFuIHtcbiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgfVxuICAgIC5kYXRlIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFyayk7XG4gICAgfVxuICB9XG4gIC5kYXRlIHtcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeSk7XG4gIH1cblxuICAubm90aWZpY2F0aW9uLXRleHQge1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gIH1cbn1cbiJdfQ== */\";","import { Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { UtilsService } from 'src/app/@core/utils.service';\nimport { PUBLISHER_TYPE } from 'src/app/@shared/enums/publisher-type';\nimport { INotification } from 'src/app/@shared/interfaces/notification';\nimport { PushService } from '../../@core/push.service';\nimport { Store } from '@ngxs/store';\nimport { MarkAsRead } from '../../@store/notifications/notifications.actions';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Utils } from '../../@global/utils';\n\n@Component({\n  selector: 'app-item-notification',\n  templateUrl: './item-notification.component.html',\n  styleUrls: ['./item-notification.component.scss'],\n})\nexport class ItemNotificationComponent implements OnInit, OnChanges {\n  @Input() info: INotification;\n  public notification: INotification;\n\n  constructor(\n    private utilsService: UtilsService,\n    private pushService: PushService,\n    private store: Store,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit() {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['info']?.currentValue) {\n      this.notification = Utils.copyObject(changes['info']?.currentValue);\n      this.notification.message = this.composeNotificationMessage(changes['info']?.currentValue);\n    }\n  }\n\n  public onImageClick() {\n    this.utilsService.goProfile(this.info.sender.id, PUBLISHER_TYPE.USER);\n  }\n\n  public onNotificationClick() {\n    if (!this.info.read) {\n      this.store.dispatch(new MarkAsRead(this.info.id));\n    }\n\n    this.pushService.processCustomAction(this.info.additional_data);\n  }\n\n  private composeNotificationMessage(notification: INotification): string {\n    const messageKey = `notificationMessages.${notification.notification_data.action}`;\n    const params = {};\n\n    for (let i = 0; i < notification.notification_data.params.length; i++) {\n      params[`param${i + 1}`] = notification.notification_data.params[i];\n    }\n\n    return this.translateService.instant(messageKey, params);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ItemNotificationComponent } from './item-notification.component';\nimport { ImageItemModule } from 'src/app/@shared/components/image-item/image-item.module';\n\n@NgModule({\n  declarations: [ItemNotificationComponent],\n  imports: [IonicModule, TranslateModule.forChild(), CommonModule, ImageItemModule],\n  exports: [ItemNotificationComponent],\n})\nexport class ItemNotificationComponentModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NotificationsPage } from './notifications.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationsPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NotificationsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\n\nimport { NotificationsPageRoutingModule } from './notifications-routing.module';\n\nimport { NotificationsPage } from './notifications.page';\nimport { SharedModule } from '../@shared/shared.module';\nimport { ItemNotificationComponentModule } from './item-notification/item-notification.module';\n\n@NgModule({\n  imports: [SharedModule, NotificationsPageRoutingModule, ItemNotificationComponentModule],\n  declarations: [NotificationsPage],\n})\nexport class NotificationsPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL25vdGlmaWNhdGlvbnMvbm90aWZpY2F0aW9ucy5wYWdlLnNjc3MifQ== */\";","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Store } from '@ngxs/store';\nimport { Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { Constants } from '../@global/constants';\nimport { INotificationList } from '../@shared/interfaces/notification';\nimport {\n  GetNextNotificationsPage,\n  GetUserNotifications,\n  MarkAllAsRead,\n} from '../@store/notifications/notifications.actions';\nimport { NotificationsState } from '../@store/notifications/notifications.state';\n@Component({\n  selector: 'app-notifications',\n  templateUrl: './notifications.page.html',\n  styleUrls: ['./notifications.page.scss'],\n})\nexport class NotificationsPage implements OnInit, OnDestroy {\n  private notificationsSubscription: Subscription;\n  public notificationList: INotificationList;\n  public hideInfiniteScroll: boolean = false;\n  constructor(private store: Store) {}\n\n  ngOnInit() {\n    this.subscribeToNotifications();\n  }\n\n  public ionViewWillEnter() {\n    this.hideInfiniteScroll = false;\n    this.store.dispatch(new GetUserNotifications({ limit: Constants.NOTIFICATION_LOAD_LIMIT_NOTIFICATIONS }));\n  }\n\n  public markAsReadAll(event) {\n    event.preventDefault();\n    this.store.dispatch(new MarkAllAsRead());\n  }\n\n  public existUnreadNotification() {\n    return this.notificationList.notifications.find((notification) => notification.read === false);\n  }\n\n  public getNextNotifications(event) {\n    const nextPage = this.notificationList.page + 1;\n    if (nextPage <= this.notificationList.total_pages) {\n      this.store\n        .dispatch(\n          new GetNextNotificationsPage({ page: nextPage, limit: Constants.NOTIFICATION_LOAD_LIMIT_NOTIFICATIONS })\n        )\n        .pipe(take(1))\n        .subscribe(() => {\n          event.target.complete();\n        });\n    } else {\n      this.hideInfiniteScroll = true;\n    }\n  }\n\n  private subscribeToNotifications() {\n    this.notificationsSubscription = this.store\n      .select(NotificationsState.getUserNotifications)\n      .subscribe(async (data) => {\n        this.notificationList = data;\n      });\n  }\n\n  private disconnectObservers(): void {\n    if (this.notificationsSubscription) {\n      this.notificationsSubscription.unsubscribe();\n    }\n  }\n\n  ngOnDestroy() {\n    this.disconnectObservers();\n  }\n}\n"],"sourceRoot":"webpack:///"}